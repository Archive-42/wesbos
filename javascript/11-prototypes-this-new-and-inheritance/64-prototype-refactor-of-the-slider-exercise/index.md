






(https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes)
    1.  [Data Attributes](https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes/#data-attributes)
-   [Creating HTML<span class="videoNumber">Part 25</span>](https://wesbos.com/javascript/04-the-dom/creating-html)
    1.  [append method](https://wesbos.com/javascript/04-the-dom/creating-html/#append-method)
    2.  [insertAdjacentElement method](https://wesbos.com/javascript/04-the-dom/creating-html/#insertadjacentelement-method)
    3.  [Generating An Unordered List](https://wesbos.com/javascript/04-the-dom/creating-html/#generating-an-unordered-list)
-   [HTML from Strings and XSS<span class="videoNumber">Part 26</span>](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss)
    1.  [document.createRange() and document.createFragment()](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#documentcreaterange-and-documentcreatefragment)
    2.  [Security and Santization](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#security-and-santization)
    3.  [XSS (Cross Site Scripting)](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#xss-cross-site-scripting)
-   [Traversing and Removing Nodes<span class="videoNumber">Part 27</span>](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes)
    1.  [The difference between an Node and an Element](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#the-difference-between-an-node-and-an-element)
    2.  [Properties to work with Nodes and Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#properties-to-work-with-nodes-and-elements)
    3.  [Removing Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#removing-elements)
-   [Cardio<span class="videoNumber">Part 28</span>](https://wesbos.com/javascript/04-the-dom/cardio)
    1.  [closest method](https://wesbos.com/javascript/04-the-dom/cardio/#closest-method)



##### <span class="grit">Module 11 - Prototypes, this, new and Inheritance</span>

-   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/60-the-new-keyword" class="currentModule">The New Keyword<span class="videoNumber">Part 60</span></a>
-   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/61-the-this-keyword" class="currentModule">The This Keyword<span class="videoNumber">Part 61</span></a>
-   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/62-prototype-refactor-of-gallery-exercise" class="currentModule">Prototype Refactor of Gallery Exercise<span class="videoNumber">Part 62</span></a>
    1.  <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/62-prototype-refactor-of-gallery-exercise/#bind-method" class="currentModule">bind method</a>
-   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/63-prototypes-and-prototypal-inheritance" class="currentModule">Prototypes and Prototypal Inheritance<span class="videoNumber">Part 63</span></a>
-   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise" class="currentModule currentPage currentSection">Prototype Refactor of the Slider Exercise<span class="videoNumber">Part 64</span></a>
-   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/65-bind-call-and-apply" class="currentModule">Bind, Call and Apply<span class="videoNumber">Part 65</span></a>
    1.  <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/65-bind-call-and-apply/#bind-method" class="currentModule">Bind method</a>
    2.  <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/65-bind-call-and-apply/#call-and-apply-methods" class="currentModule">Call and Apply methods</a>
        -   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/65-bind-call-and-apply/#call-method" class="currentModule">Call method</a>
        -   <a href="https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/65-bind-call-and-apply/#apply-method" class="currentModule">Apply method</a>

##### <span class="grit">Module 13 - Ajax and Fetching Data</span>

-   [AJAX and APIs<span class="videoNumber">Part 74</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis)
    1.  [What is an API?](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#what-is-an-api)
    2.  [JSON](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#json)
    3.  [AJAX](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#ajax)
    4.  [Public API list](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#public-api-list)
-   [CORS and Recipes<span class="videoNumber">Part 75</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes)
    1.  [Query Parameters](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#query-parameters)
    2.  [CORS](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors)
        -   [What is CORS?](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#what-is-cors)
        -   [CORS policy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors-policy)
    3.  [Babel](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#babel)
    4.  [Browserlist](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#browserlist)
    5.  [Proxy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#proxy)
-   [Dad Jokes<span class="videoNumber">Part 76</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes)
    1.  [Headers](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#headers)
    2.  [Getting a Random Index](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#getting-a-random-index)
    3.  [Loading State & CSS Loader](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#loading-state--css-loader)
-   [Currency Converter<span class="videoNumber">Part 77</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter)
    1.  [Caching the Rates](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#caching-the-rates)
    2.  [Converting](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#converting)
    3.  [Hooking Up The UI](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#hooking-up-the-ui)
        -   [Input Event on a Form](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#input-event-on-a-form)
        -   [Wiring up Handlers](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#wiring-up-handlers)
        -   [Formatting Currency using Number Format API](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#formatting-currency-using-number-format-api)

##### <span class="grit">Module 14 - ES Modules and Structuring Larger Apps</span>
##### <span class="grit">Module 15 - Final Round of Exercises</span>


<span class="grit">Prototype Refactor of the Slider Exercise</span>
===================================================================


JavaScript, PrototypesEdit Post

This lesson is a bit easier because there is no removing of events so there is no binding that we need to deal with.

Open up the slider exercise directory and open up `index.js`.

Make a copy of and call it `index-prototype.js` and then go to the `index.html` and modify the script's source tag to point to `index-prototype.js`.

Navigate into that directory in the terminal and run `npm start` within the actual terminal window (not the console).

Open the server up on your localhost and run the slider to make sure that it still works.

We have the sliders that we grabbed at the bottom.

We will log them, like we did in the previous lesson.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:20%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVQI1y3Ci26CMBQAUH5gUx56QZSH2XRbgD4oLdC1troobFlIjNv/f8pispPjQNEkRET0lIgRyDEqeV6zhOk1H2J2jnGbUp5SnmABpVwwBVxDId23fv7aO6uSPbM6a4cnNaViDAu+53gn+Lb/yuV33sgXQfac7hqaog5aHUkdS72iCoreAdT5zAb0BMRCfVnSjyW2YX0EdgnZOUA2qLRf6QBpvzRuZT1kXGw8ZLzSOJtWzw/XRfe55TZT1+zwG4kpUbdU/WTvk0fHBzw+kvsZGWd4+E/u/wC/5CwZjI/CVwAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/9e5e30ca3e179f86a085b7394b57b13b/aa440/961.png" title="selecting the elements using querySelector" alt="selecting the elements using querySelector" class="gatsby-resp-image-image" /> </span>

You should see the following in the console

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:902px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:16.53333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiUlEQVQI15WPDQqFMAyDvf/1BFHwB92mbiIbYyLI4Hu0N3iF0jRpAm2+7yPGyLquGGMIIWCNpZSC9562bRmGAeccfd8rHsdR5zzPyk/TpJrkNICGiFEOrbV0XcfzPOScWZaFbds4jkM1CRAsnOxXuNj3XVs8Ta1Vjed5ct83KSWCD7zvy78lX/0ARJzhYZ5KJVIAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/7e8774e9f43d72797283a379ee6540c6/58213/962.png" title="log of mySlider and dogSlider" alt="log of mySlider and dogSlider" class="gatsby-resp-image-image" /> </span>

Now we will do the same thing we did last time -- add a `new` keyword in front of it. That will create a new instance of the slider for each instance that we have.

    const mySlider = new Slider(document.querySelector(".slider"));
    const dogSlider = new Slider(document.querySelector(".dog-slider"));

    console.log(mySlider, dogSlider);

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:956px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:40%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABGklEQVQY03WRXY+CMBBF/f+/bYNxBR9akZVIQdjSdjpYKS2zQZLV7Md5uQ+Tm3uS2dAL8zwTEVq7379vt0lRFIyx9MFut8vzvKqqNE2LoiCiaZo2RGQMHI/H8/kjyzI7YHU5v2U1L/UNwRgwD7TWAICIxhjnHBGFEDbrYF3XUspOdNBC38jbGNH55UT/spRXVaVVK1orrCqVERY7iwq88/f7aPGutQJYFIZhAIAQwnN5RSllO2sE4CfaDm2Li0Vvri0Up5wxzhhrmoZzLqX8oxx9xAb1xdgreucNmCRJsiwty3IV/Km9hhCCc37YH0781MteXKp5mkMI4zg657z38wvPcowxhICIALCYo3XuhgMSUYzx+4XxF977L+tMxyEHdRJOAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/e2f1efe0943f68afe10804c973d29474/7b1dc/963.png" title="log of instance of the slider for each instance" alt="log of instance of the slider for each instance" class="gatsby-resp-image-image" /> </span>

As you can see we have our sliders now, and they each have the prototypes, and there is nothing in them yet.

Let's start refactoring from the top of the file now.

The code shown below is what we are starting with.

    function Slider(slider) {
    if (!(slider instanceof Element)) {
      throw new Error('No slider passed in');
    }
    // create some variables for working with the slider
    let prev;
    let current;
    let next;
    // select the elements needed for the slider
    const slides = slider.querySelector('.slides');
    const prevButton = slider.querySelector('.goToPrev');
    const nextButton = slider.querySelector('.goToNext');

    function startSlider() {
      current = slider.querySelector('.current') || slides.firstElementChild;
      prev = current.previousElementSibling || slides.lastElementChild;
      next = current.nextElementSibling || slides.firstElementChild;
      console.log({ current, prev, next });
    }

    function applyClasses() {
      current.classList.add('current');
      prev.classList.add('prev');
      next.classList.add('next');
    }

    function move(direction) {
      // first strip all the classes off the current slides
      const classesToRemove = ['prev', 'current', 'next'];
      prev.classList.remove(...classesToRemove);
      current.classList.remove(...classesToRemove);
      next.classList.remove(...classesToRemove);
      if (direction === 'back') {
        // make an new array of the new values, and destructure them over and into the prev, current and next variables
        [prev, current, next] = [
          // get the prev slide, if there is none, get the last slide from the entire slider for wrapping
          prev.previousElementSibling || slides.lastElementChild,
          prev,
          current,
        ];
      } else {
        [prev, current, next] = [
          current,
          next,
          // get the next slide, or if it's at the end, loop around and grab the first slide
          next.nextElementSibling || slides.firstElementChild,
        ];
      }

      applyClasses();
    }

    // when this slider is created, run the start slider function
    startSlider();
    applyClasses();

    // Event listeners
    prevButton.addEventListener('click', () => move('back'));
    nextButton.addEventListener('click', move);
    }

    const mySlider = Slider(document.querySelector('.slider'));
    const dogSlider = Slider(document.querySelector('.dog-slider'));function Slider(slider) {
    if (!(slider instanceof Element)) {
      throw new Error('No slider passed in');
    }
    // create some variables for working with the slider
    let prev;
    let current;
    let next;
    // select the elements needed for the slider
    const slides = slider.querySelector('.slides');
    const prevButton = slider.querySelector('.goToPrev');
    const nextButton = slider.querySelector('.goToNext');

    function startSlider() {
      current = slider.querySelector('.current') || slides.firstElementChild;
      prev = current.previousElementSibling || slides.lastElementChild;
      next = current.nextElementSibling || slides.firstElementChild;
      console.log({ current, prev, next });
    }

    function applyClasses() {
      current.classList.add('current');
      prev.classList.add('prev');
      next.classList.add('next');
    }

    function move(direction) {
      // first strip all the classes off the current slides
      const classesToRemove = ['prev', 'current', 'next'];
      prev.classList.remove(...classesToRemove);
      current.classList.remove(...classesToRemove);
      next.classList.remove(...classesToRemove);
      if (direction === 'back') {
        // make an new array of the new values, and destructure them over and into the prev, current and next variables
        [prev, current, next] = [
          // get the prev slide, if there is none, get the last slide from the entire slider for wrapping
          prev.previousElementSibling || slides.lastElementChild,
          prev,
          current,
        ];
      } else {
        [prev, current, next] = [
          current,
          next,
          // get the next slide, or if it's at the end, loop around and grab the first slide
          next.nextElementSibling || slides.firstElementChild,
        ];
      }

      applyClasses();
    }

      // when this slider is created, run the start slider function
      startSlider();
      applyClasses();

      // Event listeners
      prevButton.addEventListener('click', () => move('back'));
      nextButton.addEventListener('click', move);
    }

    const mySlider = Slider(document.querySelector('.slider'));
    const dogSlider = Slider(document.querySelector('.dog-slider'));

The condition that checks whether the parameter is an element or not is fine, we do not have to refactor that.

The `let` variable declarations that come next need to be renamed to be `this` dot the variable name.

    let prev;
    let current;
    let next;

Rename those variable everywhere in the code they are used.

    this.prev;
    this.current;
    this.next;

Now that we have done that, we actually do not need those declarations because there is no sense in making those variables when they are properties because properties can be added at any time.

We were only declaring those variables so we had a closure where those variables were available.

You can go ahead and delete those 3 variable declarations (but keep the references to them that you renamed elsewhere!)

    // select the elements needed for the slider
    const slides = slider.querySelector(".slides");
    const prevButton = slider.querySelector(".goToPrev");
    const nextButton = slider.querySelector(".goToNext");

The next 3 declarations you see above also need to be `this.`. Go ahead and rename those and everywhere they are being referenced. The `prevButton` however is only accessible inside of the constructor when we add the event listener. They are not needed anywhere inside of the prototype method, so it's not necessary to put it on `this`.

So `prevButton` and `nextButton` can stay variables but we will just rename `slides` like so 👇

    // select the elements needed for the slider
    this.slides = slider.querySelector(".slides");
    const prevButton = slider.querySelector(".goToPrev");
    const nextButton = slider.querySelector(".goToNext");

Now we will move all of the methods out of the `Slider()` constructor.

Grab everything from the `startSlider` function all the way to where we have our event listeners and the call to `startSlider` and `applyClasses`.

Your file should look the same as below.

    function Slider(slider) {
      if (!(slider instanceof Element)) {
        throw new Error("No slider passed in");
      }
      // create some variables for working with the slider
      let prev;
      let current;
      let next;
      // select the elements needed for the slider
      const slides = slider.querySelector(".slides");
      const prevButton = slider.querySelector(".goToPrev");
      const nextButton = slider.querySelector(".goToNext");

      // when this slider is created, run the start slider function
      startSlider();
      applyClasses();

      // Event listeners
      prevButton.addEventListener("click", () => move("back"));
      nextButton.addEventListener("click", move);
    }

    function startSlider() {
      current = slider.querySelector(".current") || slides.firstElementChild;
      prev = current.previousElementSibling || slides.lastElementChild;
      next = current.nextElementSibling || slides.firstElementChild;
      console.log({ current, prev, next });
    }

    function applyClasses() {
      current.classList.add("current");
      prev.classList.add("prev");
      next.classList.add("next");
    }

    function move(direction) {
      // first strip all the classes off the current slides
      const classesToRemove = ["prev", "current", "next"];
      prev.classList.remove(...classesToRemove);
      current.classList.remove(...classesToRemove);
      next.classList.remove(...classesToRemove);
      if (direction === "back") {
        // make an new array of the new values, and destructure them over and into the prev, current and next variables
        [prev, current, next] = [
          // get the prev slide, if there is none, get the last slide from the entire slider for wrapping
          prev.previousElementSibling || slides.lastElementChild,
          prev,
          current,
        ];
      } else {
        [prev, current, next] = [
          current,
          next,
          // get the next slide, or if it's at the end, loop around and grab the first slide
          next.nextElementSibling || slides.firstElementChild,
        ];
      }

      applyClasses();
    }

    const mySlider = new Slider(document.querySelector(".slider"));
    const dogSlider = new Slider(document.querySelector(".dog-slider"));
    console.log(mySlider, dogSlider);

Now we need to grab every function that we just moved out of the constructor and refactor it to live on the prototype.

    function Slider(slider) {
      if (!(slider instanceof Element)) {
        throw new Error("No slider passed in");
      }
      // create some variables for working with the slider
      this.prev;
      this.current;
      this.next;
      // select the elements needed for the slider
      this.slides = slider.querySelector(".slides");
      const prevButton = slider.querySelector(".goToPrev");
      const nextButton = slider.querySelector(".goToNext");

      // when this slider is created, run the start slider function
      this.startSlider();
      this.applyClasses();

      // Event listeners
      prevButton.addEventListener("click", () => this.move("back"));
      nextButton.addEventListener("click", this.move);
    }

    Slider.prototype.startSlider = function() {
      this.current =
        this.slider.querySelector(".current") || this.slides.firstElementChild;
      this.prev =
        this.current.previousElementSibling || this.slides.lastElementChild;
      this.next = this.current.nextElementSibling || this.slides.firstElementChild;
    };

    Slider.prototype.applyClasses = function() {
      this.current.classList.add("current");
      this.prev.classList.add("prev");
      this.next.classList.add("next");
    };

    Slider.prototype.move = function(direction) {
      // first strip all the classes off the current slides
      const classesToRemove = ["prev", "current", "next"];
      this.prev.classList.remove(...classesToRemove);
      this.current.classList.remove(...classesToRemove);
      this.next.classList.remove(...classesToRemove);
      if (direction === "back") {
        // make an new array of the new values, and destructure them over and into the prev, current and next variables
        [this.prev, this.current, this.next] = [
          // get the prev slide, if there is none, get the last slide from the entire slider for wrapping
          this.prev.previousElementSibling || this.slides.lastElementChild,
          this.prev,
          this.current,
        ];
      } else {
        [this.prev, this.current, this.next] = [
          this.current,
          this.next,
          // get the next slide, or if it's at the end, loop around and grab the first slide
          this.next.nextElementSibling || this.slides.firstElementChild,
        ];
      }

      this.applyClasses();
    };

Now let's go ahead and fix the errors showing up in the text editor.

The call to `startSlider` and `applyClasses` need to be changed to `this.startSlider()` and `this.applyClasses()`. Same thing for the calls to the `move` function, they need to be `this.move`.

    // when this slider is created, run the start slider function
    this.startSlider();
    this.applyClasses();

    // Event listeners
    prevButton.addEventListener("click", () => this.move("back"));
    nextButton.addEventListener("click", this.move);

Within `move` function we need to change it to call `this.applyClasses()`.

Now let's go to our browser to refresh and see what errors we are getting.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:20%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA10lEQVQI1z2L206DMABA+f8/Uhkdl9YZuaatQosECjruZmxCmQTMYrLkPJyHc5QzISMlF/t19L0fx57eqAz8EeMB48H3es89Udo77uC6E6WSx5LxKfAlwb9fn8pWVwtn0thLaM46OFlGqanHlwMFIALau7YrHbsNPMnZNReyEHMuZJbOIpuLXNm6dkmSca+d1afR1GvLZI8PGYQCocLQj9CaCV5ZtKZJx1gVhg2LqijsYv7N2W3ePuIUWs5OxaZpA4CfEUboUoilqa9VubbNrbnTt1vf/fsfdIfQOM/YBXAAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/e239de43dcd5bf2b4f62cf8c1a4c9392/aa440/964.png" title="uncaught type error: cannot read property &#39;querySelector&#39; of undefined" alt="uncaught type error: cannot read property &#39;querySelector&#39; of undefined" class="gatsby-resp-image-image" /> </span>

The first one we see is

> Cannot read property 'querySelector' of undefined\`

The stack trace tells us it happened on line 63, however that is not helpful because that is the end of our file. Further down the stack trace it mentions line 41 so let's check that, however that line is just a comment!

So let's click on the error to see where it takes us.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:30.4%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOklEQVQY0xXLzU/CMBiA8f3/Vw4kxiNXTRQwHrhoEDF+R0E22Lq+/Vh5246t3QYIcepz+x2eICGpEHK1igFYnMQJZeGKpinE/0i/FhFJaZIQISXnfLlcMsaAUpkpBAgeX+fhigDjQirOJeocbaHUWkpFmAKBaMqmrpv/tnVdM84XYYiIqHVQIkk/JpBGOiOF4TnCd2MrZ5xzx/1ut/VNUx2Oh7Ztf37atm299wCgtbY2D06H8uzq/WSoOuei21fdvupc4GCiSpMXaitE5Te7wlRrnaMpNBbWbpxz3ntrbXDzlo3Gd73BvDf8vLyl19Ns9GxfvmyJBOmEJfeaPVg5BXJj+aT2T8akwESWKWNMsHXrZDZehvM4muVaVqXeN5vKbaRgcfxB4k+gC84ioKGAiNK5teirSmv9N/8CTZA+kECxaL4AAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/cd7e01996373eed3af71ac4f7623cbca/aa440/965.png" title="console log in the sources tab of browser" alt="console log in the sources tab of browser" class="gatsby-resp-image-image" /> </span>

Unfortunately that is not very helpful either. Sometimes you get these errors and it's hard to find where the error is even when the browser tries to give you a stack trace.

Let's just try to debug this ourselves.

Let's look at everywhere that we are using `querySelector`.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1450px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:49.6%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7ElEQVQoz1WPW4vTQACF++CL0DbJTJJuk15Xu5lkcm8uk5lk0k3S64rdUoVFV1lWFFZEBP8/SNmiCOfhvHzn0upZed+udbtScA5dovhFN/mm8B/afCGgrItyAVHRzCSTnoSIas01N5ZQKiHSGnn1VbB85e40su9dH0Z0OVh8N9/8dvNCt+dDL9FcopolMJiIMgllkskEkz1ntSST9Jxo4sd6uhzQ/SgqUIgvo2CcZP28GvNimrNh0qhhAX0OcXGecIYNoljlyIt1O9KtUPdiPaAwKMWw7MZNJ6xByOU4l8NcDjjE/H8YEcXKBYOKp29MRFQwMgkRiAgwEogSgFJgEMkgEiIn//e/SVuiQQRcCnYtOGsBV6LTiHYjOOsOXratVdu56eB1x15JTvXS2b3w37ftGpjkHzx0t5q7G2T7QXoD3YVI3onswdvMN5/H9b3Z3M+KoyV7lUg2oNgpbgMQldAZTqchu4rIJNsa5e0l3Y2yrRKupusj2q4Oj+rDr+7dE3z7eJEfkBrxQcF7jPcCLuPi1DyZx7MkHCabq/Iw47eTZCU7hVp9AfTT5sPw7kk+fu19/CnWh9fQr/SKa1WpxdeqXbYkI5UxhVYGMYM4fxawGHQ4tIu+l2hB3PeTvp+oLgGYAZsBTIFFgcn+AIDkaw9y6DzuAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/42c40ffc9fcb4f9f269fff8eb44ddd7e/c4451/966.png" title="using querySelector everywhere in the slider function" alt="using querySelector everywhere in the slider function" class="gatsby-resp-image-image" /> </span>

Those first 3 should be fine since we are passing in the slider.

Where else are we using `querySelector`? Within the `startSlider` function and where we initialize the slider instances.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:11.466666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgklEQVQI12OQ0rdQMLWWNfdSsguUMHKW0beUN7FStTBTsHCTtwpQsHZJCJfKjhLLjRUN9FQTMXEWt3WWNHYU0bUT1LZjkDSykbdylrENkXcIl7QKlDJxljFzVrSyV7DxUHQMl7ILmeArsy2Qb0sg31QPGSkrDzEHTwlHL0kbL3FTTwALsBqKkraxKgAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/99e4d5313b8a57e705f0a053c8499dfa/aa440/967.png" title="initializing the slider instances" alt="initializing the slider instances" class="gatsby-resp-image-image" /> </span>

Wes thinks it might be the latter, which he will test by logging the slider parameter within the `Slider()`.

We can tell it's not an issue with that because we can see the slider being logged to the console.

It seems like the issue must be in our `startSlider` function when we try to access `this.slider`.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1360px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:56.266666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB+0lEQVQoz02R226bQBCG/QBVDOF8MrGxA7ZZ8MICu2uOZo2DDzmoUlOpvewL9AVaqVXfu3LTxJG+i5FGn2bmn4EaFNeo5FHJw5KPKz4uhbjSw8yCiR0loyhRfGz4GwswC7TWiso+5uf0hYECchW3N+tOy9ZW1VhVI6alAqgWYC0gZojFBRmBzchnNmA2JDLIuIvsU9NHNvymrn8pmx8a+zNvTuQ4So/T5ODg+7GXhx/mVIiogNYCKOQluUwW54SfR2r0dUR+CsV3q/8d7j91z0v2GbbPsPuySu4KC+81XElJIYNC89/JvJvKi2IadA5sJri141wExbW/E8FOCu6koJcCZsSMc+nVLBu65G3nsywvqbSkTrh30MkmBx1uNLhRwkqFtQobLWqMqNVgayWdjrZqUIgLfLn52suuvMwC29vwaKCtW3+06X6Sn9z66bZ6cuszk/XRiJkWMQWsBS8deu9kaZlPgn4M72yyN1HrRP0N6m3ST4sHG+/H9DAt7k3U6TEzks5Idlr4f/6Ac1PNr73V/QjtZvWjDptZenSy46x6nJWPTn6alg827k201WNmJlsz6fRVKS7O3x4IXqoHue63SlAbiGlwo0ZnjJjpUatHrREzCZRXtxnnkaGLhy7mPPIamE9lnwwX9KXHeYRzzwy9f/Ur/LuQ39L+C+bYeDc+mel5AAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/ce25c96b6196c04a02eba23666dbba83/b5a09/969.png" title="issue with startSlider function where we are using this.slider function" alt="issue with startSlider function where we are using this.slider function" class="gatsby-resp-image-image" /> </span>

Let's throw a `debugger` in the first line of the `startSlider` function.

Now when you refresh the page, the debugger should pause the execution of the code.

If we look at the debug dev tools, we can see that at this point in time, the Slider is missing properties it needs, such as `this.slider`.

Whenever the `startSlider()` function is running, `this.slider` does not yet exist.

The reason for this is we never saved a reference to the slider that was passed in, so let's go ahead and do that.

    // select the elements needed for the slider
    this.slides = slider.querySelector(".slides");
    this.slider = slider;

Now if you refresh the page, you should no longer see that problem in the console.

We now get the following error 👇

> index-prototype.js:41 Uncaught TypeError: Cannot read property 'classList' of undefined at HTMLButtonElement.Slider.move (index-prototype.js:38)

On line 38 we are calling `this.prev.classList.remove(...classesToRemove);`. It is trying to tell us that `this.prev` is not defined.

If we log what `this` is within our `move` function, we will see that it's the next button which is not working. The previous button actually works.

So let's go to where we have listened to our move.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:14.133333333333335%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAsElEQVQI1x3ISQ6CMBQAUC4AtImWjcqolAgSDRR+RW2rGIwDatyRONz/EkZ3L08zIqHHe2OqjHivJwd9ukMUzJCblGMKiAKO4A+OaGmGHFGOw9/gCDSnurqr+wjaYS5DXroM3IwFLLcXS8IEKde9mSRzOUg3Tnr08mKYVX2QhEkrUZrffMbN26lfnjjFWzERtb+pqdq61ZGoG6lbq3x40NmqC9Qzkg3Kz7hoEbugrP0COfkiHO1ESacAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/0e9e8be690b11b4b268850ef79d2c927/aa440/970.png" title="calling move funtion and passing reference of move function in first and second event listener" alt="calling move funtion and passing reference of move function in first and second event listener" class="gatsby-resp-image-image" /> </span>

The reason next is broken but previous is not is that in next, we just pass a reference to that function, and it's being rebound.

In the `prevButton` case, we are passing it an anonymous arrow function.

We can solve this issue 1 of 2 ways.

We can bind it with `this` and that will work.

    nextButton.addEventListener('click', this.move.bind(this));

The reason we are allowed to do that here is because we aren't removing the event listener so we don't need access to the new `this` that was bound.

The other thing we can do is refactor it to an arrow function as shown below.

    nextButton.addEventListener('click', () => this.move());

You can also do it as shown below.

    // Event listeners
    this.move = this.move.bind(this);
    prevButton.addEventListener('click', () => this.move('back'));
    nextButton.addEventListener('click', () => this.move());

We will stick to the arrow function in this case.

The arrow function will have bound and not the `this.move` which is what we want, because `this.move` needs access to the instance in order to reference the previous, next and current DOM elements.

The slider should be working well now if you refresh the page!

Now that we are done, let's just go over a few things.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:47.199999999999996%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcUlEQVQoz3WR+W6DMAzGeYIyVo5CO9qw9QoUmgIhIQmD0GMdbXdJ+297/8eY2KSdmvSTZX/WJ8u2Yi3YIEzciA7JzmOHISLTGI2TGMR4QpMJTftIWkGp+Uyb579QDEh1yL0lHkXYjTBYpW7MTHxtJMLMCxOLXl4YWBirsusXf83EhFyb5dqManOqzUibzMh5S/ZZtq35R/xpVqFQg0r1axWWaiDVYK0GdcevOsG2E6w7ft2KvlSDzRkU3/2KDkl/sbGjvZOdnHSvh3JAH+y0cWPm4tJNCjcWZlTrmTTznbGofpp9AqK9h27H5cljTS8Sk/JxlDd2lNkh6YXUCnPd590l15eiXRvyTxR9UfTJdlpspptnsH4F9YvD7h3+NJSvLj94rLoS0uNylN0Y+dHZHqy6scndOWrO0K2iQzpAxEvwBd4BdgLs6KDKRhKwe5AVY5xcYXyJ09GKmUlpX1cWL3tL2YXF+2RI/j7wHfqP/nXtN+pRXbEEbBgwAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/8cf01be0ad055f2995f1841a1b04c3fa/aa440/971.png" title="selecting the prev and next buttons using querySelector" alt="selecting the prev and next buttons using querySelector" class="gatsby-resp-image-image" /> </span>

Why did we not rename the buttons to live on `this` like `this.prevButton = slider.querySelector('.goToPrev');`?

It is because we do not need them anywhere outside of the constructor. If that is the case, keep them as regular variables and reference them when you need them inside of the function.

One cool thing about this is if you take `dogSlider`, you cannot access it in the console using Parcel. If you want to access it, you have to say something like `window.dogSlider = dogSlider` and then you have access to `dogSlider` in the console.

The cool thing about that is now you can call the functions yourself like the move in the terminal to control the slider.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:570px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:46.4%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABcElEQVQoz42QC2/aMBRG8///1BgrUgm0oAXIGIogoFGSBuy8TJwHp7IFLZ1WaVe6ulbkfPf4OF3XYfpyudDplizJKNKUqkipVY6SiZ2tVugyIxcJmRSYaruOWmuapqFtW9tOURSUSuF5M/oPDwzHI1ZBwPh5wvcfA2SW8zSZ8uiOmHozws0G4Xn86feI3CEi3BAfj3aBgXJu6Sb45eVAHL8i05QkSRBSopTieDpxOglSQ641dZGjoggtBW1TU9f1R6AJ0loTRRG+77Na/Wa32xGGIb98n/1+z/+UCTP1ibCqKkuVZRllUZLnuV3WGb9X14bYEN2c/d2W0Fz6OZvxrdfj0XUJgoDR+Ilev48QgqHrMhgMmEyn1rX550Zlya7z6rB93xzHMa9JgpTSBhlS870sS9vn8xmtK3v//pn35ZRFYZ9wOBxYLBYsl0u22y3r9Zr5fP6lw8sd1X07ddOizpWlMT6NRzONu9v5K1//cvgGVDCwhVjJCLAAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/e90191c7d6c2cc9b19f252c7a5956cbb/432e7/972.png" title="calling the move function on dogSlider object in console" alt="calling the move function on dogSlider object in console" class="gatsby-resp-image-image" /> </span>

What you could do is at the bottom of the page add an event listener on the window's keyup event like below.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1378px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:41.6%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQY033P7W6CMBgFYG/A2AKtylREnUpLQQVpaWvxczjB7P7vZnEb+2VMnpycPyd531Y31BZRKCpsqhEziBkn3NlE/nbEjEUUDORTrR7Tb+llqu7DrPTlfSzrIf/EoRrLypf1RFbdaA+WOQgaj96Mu0zbVDtsbxOJQ46oQKF4JOUOEZBKK5QWUZgUmBpMDaI7m+i/8WC993g539Vedgzy7XuWTNLU53yutr4UfVP0zQFHxSS6+tF1Gt9Gq48eKUCQP8ZuXDhEDGLhybuvv4bpwWXZQGlXFz2zx1w78cmi5udm2eT/z6HqLAReHSfqNuLlMCu9dTpLkx7LwVzAhYBLAZf5Uy1ElLs59rNLmx4AO3YeTh12htEZxmcQnV5oIbqbictYle1VBTcVaMCkBknd2VQvfAPM21Jdco5cdAAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/46c17737dc4c32031e4cfe69e7e6c264/e40ed/973.png" title="event listener keyup to window object" alt="event listener keyup to window object" class="gatsby-resp-image-image" /> </span>

Now if you use your arrow keys you will see that it works.

That is what is great about this, you can build something like this slider and then surface the functionality via methods and then let other people hook into your slider functionality and extend it with their own.

Find an issue with this post? Think you could clarify, update or add something?

All my posts are available to edit on Github. Any fix, little or small, is appreciated!

[Edit on Github](https://github.com/wesbos/wesbos/tree/master/src/javascript/11-prototypes-this-new-and-inheritance/64-prototype-refactor-of-the-slider-exercise/64-prototype-refactor-of-the-slider-exercise.mdx)

[**← Prev**](https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/63-prototypes-and-prototypal-inheritance/)

Prototypes and Prototypal Inheritance

[**Next →**](https://wesbos.com/javascript/11-prototypes-this-new-and-inheritance/65-bind-call-and-apply/)

Bind, Call and Apply

### <span class="highlight">Syntax Podcast</span>

Hold on — I'm grabbin' the last one.
