






(https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes)
    1.  [Data Attributes](https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes/#data-attributes)
-   [Creating HTML<span class="videoNumber">Part 25</span>](https://wesbos.com/javascript/04-the-dom/creating-html)
    1.  [append method](https://wesbos.com/javascript/04-the-dom/creating-html/#append-method)
    2.  [insertAdjacentElement method](https://wesbos.com/javascript/04-the-dom/creating-html/#insertadjacentelement-method)
    3.  [Generating An Unordered List](https://wesbos.com/javascript/04-the-dom/creating-html/#generating-an-unordered-list)
-   [HTML from Strings and XSS<span class="videoNumber">Part 26</span>](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss)
    1.  [document.createRange() and document.createFragment()](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#documentcreaterange-and-documentcreatefragment)
    2.  [Security and Santization](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#security-and-santization)
    3.  [XSS (Cross Site Scripting)](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#xss-cross-site-scripting)
-   [Traversing and Removing Nodes<span class="videoNumber">Part 27</span>](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes)
    1.  [The difference between an Node and an Element](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#the-difference-between-an-node-and-an-element)
    2.  [Properties to work with Nodes and Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#properties-to-work-with-nodes-and-elements)
    3.  [Removing Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#removing-elements)
-   [Cardio<span class="videoNumber">Part 28</span>](https://wesbos.com/javascript/04-the-dom/cardio)
    1.  [closest method](https://wesbos.com/javascript/04-the-dom/cardio/#closest-method)




##### <span class="grit">Module 13 - Ajax and Fetching Data</span>

-   [AJAX and APIs<span class="videoNumber">Part 74</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis)
    1.  [What is an API?](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#what-is-an-api)
    2.  [JSON](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#json)
    3.  [AJAX](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#ajax)
    4.  [Public API list](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#public-api-list)
-   [CORS and Recipes<span class="videoNumber">Part 75</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes)
    1.  [Query Parameters](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#query-parameters)
    2.  [CORS](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors)
        -   [What is CORS?](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#what-is-cors)
        -   [CORS policy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors-policy)
    3.  [Babel](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#babel)
    4.  [Browserlist](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#browserlist)
    5.  [Proxy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#proxy)
-   [Dad Jokes<span class="videoNumber">Part 76</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes)
    1.  [Headers](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#headers)
    2.  [Getting a Random Index](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#getting-a-random-index)
    3.  [Loading State & CSS Loader](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#loading-state--css-loader)
-   [Currency Converter<span class="videoNumber">Part 77</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter)
    1.  [Caching the Rates](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#caching-the-rates)
    2.  [Converting](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#converting)
    3.  [Hooking Up The UI](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#hooking-up-the-ui)
        -   [Input Event on a Form](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#input-event-on-a-form)
        -   [Wiring up Handlers](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#wiring-up-handlers)
        -   [Formatting Currency using Number Format API](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#formatting-currency-using-number-format-api)

##### <span class="grit">Module 14 - ES Modules and Structuring Larger Apps</span>

-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules" class="currentModule">Modules<span class="videoNumber">Part 78</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#what-are-modules" class="currentModule">What are Modules?</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#use-cases" class="currentModule">Use Cases</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#modules-in-the-browser" class="currentModule">Modules in the Browser</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#in-the-past---sharing-javascript-code-between-files" class="currentModule">In the Past - Sharing JavaScript Code between Files</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#setting-up-server" class="currentModule">Setting up Server</a>
    4.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#importing-and-exporting-modules" class="currentModule">Importing and Exporting Modules</a>
    5.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#things-we-need-to-know-about-modules" class="currentModule">Things we need to know about Modules</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#scope" class="currentModule">Scope</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#difference-between-default-and-named-exports" class="currentModule">Difference between Default and Named Exports</a>
    6.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#renaming-modules" class="currentModule">Renaming Modules</a>
    7.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#more-ways-to-import" class="currentModule">More Ways to Import</a>
    8.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#loading-javascript-on-demand" class="currentModule">Loading JavaScript On Demand</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#async" class="currentModule">async</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/79-currency-module-refactor" class="currentModule">Currency Module Refactor<span class="videoNumber">Part 79</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/79-currency-module-refactor/#bootstrap--app-init-functions" class="currentModule">Bootstrap / App Init Functions</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor" class="currentModule currentPage currentSection">Dad Jokes Modules Refactor<span class="videoNumber">Part 80</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/#refactoring-into-modules" class="currentModule currentPage">Refactoring into Modules</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/#fixing-refactoring-errors" class="currentModule currentPage">Fixing Refactoring Errors</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/#recap" class="currentModule currentPage">Recap</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel" class="currentModule">Bundling and Building with Parcel<span class="videoNumber">Part 81</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#benefits-of-bundlers" class="currentModule">Benefits of Bundlers</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#bundler-options--alternatives" class="currentModule">Bundler Options / Alternatives</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#using-parcel" class="currentModule">Using Parcel</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#dad-jokes-module" class="currentModule">Dad Jokes Module</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#installing-parcel" class="currentModule">Installing Parcel</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#adding-an-npm-script-to-packagejson" class="currentModule">Adding an NPM Script to package.json</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#building-with-parcel" class="currentModule">Building with Parcel</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages" class="currentModule">Using Open-Source npm packages<span class="videoNumber">Part 82</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#node-modules-folder" class="currentModule">node-modules folder</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#using-third-party-packages" class="currentModule">Using Third Party Packages</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#third-party-node-modules" class="currentModule">Third Party Node Modules</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#waait-npm-package" class="currentModule">waait npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#faker-npm-package" class="currentModule">faker npm package</a>
    4.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#commonjs-syntax-vs-ecma-script-modules-import" class="currentModule">CommonJS Syntax vs ECMA Script Modules import</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#date-fns-npm-package" class="currentModule">date-fns npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#axios-npm-package" class="currentModule">axios npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#lodash-npm-package" class="currentModule">lodash npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#await-to-js" class="currentModule">await-to-js</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security" class="currentModule">Security<span class="videoNumber">Part 83</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#javascript-is-public" class="currentModule">JavaScript is public</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#xss-and-sanitizing-your-inputs" class="currentModule">XSS and Sanitizing your Inputs</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#farcebook" class="currentModule">FarceBook</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#image-event-hijacking" class="currentModule">Image Event Hijacking</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#sanitizing-user-data-with-dompurify" class="currentModule">Sanitizing User Data with DOMPurify.</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#https-origin" class="currentModule">HTTPS Origin</a>

##### <span class="grit">Module 15 - Final Round of Exercises</span>


<span class="grit">Dad Jokes Modules Refactor</span>
====================================================


JavaScript, ES ModulesEdit Post

In this lesson we will refactor our dad jokes exercise so you can see how Wes would structure it.

1.  Start by duplicating the `76 - Dad Jokes` folder within the `exercises/` directory and renaming it to `80 - Dad Jokes Modules`.
2.  Take all the code in `jokes-FINISHED.js` and put it `jokes.js` and then delete the finished version of the file.
3.  Convert this exercise to use modules by first putting an attribute of `type="module"` on the script tag on the HTML page.
4.  Run the exercise under a server which we can do in VS Code by right clicking the file in VS Code and selecting "open with live server".

Now when the server loads, the dad jokes app should be working as expected.

Let's start the refactor by first looking at the code within `jokes.js`, and then we can begin splitting it out line by line, function by function.

    // jokes.js
    const jokeButton = document.querySelector(".getJoke");
    const jokeButtonSpan = jokeButton.querySelector(".jokeText");
    const jokeHolder = document.querySelector(".joke p");
    const loader = document.querySelector(".loader");

    const buttonText = [
      "Ugh.",
      "ü§¶üèª‚Äç‚ôÇÔ∏è",
      "omg dad.",
      "you are the worst",
      "seriously",
      "stop it.",
      "please stop",
      "that was the worst one",
    ];

    async function fetchJoke() {
      // turn loader on
      loader.classList.remove("hidden");
      const response = await fetch("https://icanhazdadjoke.com", {
        headers: {
          Accept: "application/json",
        },
      });

      const data = await response.json();
      // turn the loader off
      loader.classList.add("hidden");
      return data;
    }

    function randomItemFromArray(arr, not) {
      const item = arr[Math.floor(Math.random() * arr.length)];

      if (item === not) {
        console.log("Ahh we used that one last time, look again");
        return randomItemFromArray(arr, not);
      }

      return item;
    }

    async function handleClick() {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

    jokeButton.addEventListener("click", handleClick);

<span class="grit"><a href="#refactoring-into-modules" class="hash-anchor before"></a>Refactoring into Modules</span>
---------------------------------------------------------------------------------------------------------------------

The entry point to our JavaScript will be `jokes.js` because that is what we have linked on the HTML page.

In the entry point, Wes like to do his selecting and event listeners but everything else, all of the data, functionality, utilities and handlers will all be in separate files in their own modules. We will use this approach.

Starting at the top of `jokes.js`, the first 4 lines of code are simply selecting elements, so let's leave those for now.

Where should we put the `buttonText` variable?

Sometimes people will organize their code into folders, so to demonstrate that, we will put this in a folder called `data`, which you need to create.

Within the folder, add a file called `buttonText.js`. Copy and paste the buttonText variable in that file.

*We will worry about importing and exporting these functions between modules later, for now we just want to get all of the different functions into their own files.*

Next is the `fetchJoke` function.

That is core to what the application does so often people will make a `lib` folder for this. Make that folder.

*(Note: you don't have to do this, Wes personally finds it confusing when people have hundreds of folders for organization sakes. Feel free to just make files in the root directory or organize your files however you like. Wes suggests starting simple and the coming back and refactoring if you need more organization.)*

Within that new folder, create a file `index.js` which will contain all of the library JavaScript.

Copy and cut the `fetchJoke` function into the `index.js` file.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1322px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:78.4%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACeklEQVQoz22SWW/aQBhF+QtVsT22CZCwY49nbGPwMotnMJtDSAjBJYK2Uh/avPb/v1SmUbZWOrpvR6P7za3UfdkMpjabWlRY8U1/kqP4dhDOXS4swvth3BqTZsBU5wx8R0Wx4qbPLRK3I9oa3/fDXT86dqLcSSlkxE/DQZJcjWnVYorNFMhUh79Q0SAxHKK58wY9XLBHbbIB5KBHhR7udS8zXapjCYKsFknTl8ARVZu9k3VE6iPB707jxUOfbvCssOV9j24QCclsjBI+yGbOJu9m+eVkCbwU4PRZVu0YOPTCp14a9OLEmu2864M9f6gHwkliGJNeRBAJO37aXa6s27y3XBm+UOBZrg4jE/GLyXS4vcNfdmh/C7f5cL3oLpat2VJzZwrKPg355/JCXIX8fWc7aQYSOKyRrOH2e//61KGrZsD0QBq+MPy0ZCSMkXirvcomogBx1SYNsm5nuybZ1EI5WOft6aIzW3TmZbblQnflR1m1EwNRDfF2KABKqzZVIFMgr9qsxCpRYJmqk36UASQ1TE1/2ks2ADPdlQClmsMAYgAzgIXuCoAFwFzHHKD0o2wgZrrE43EvYjArOmR96ZNRMulO2EDs8OIwFLtBwj2adINcRfx5bQ6r1Ny04THDz8D4Ro/32mSnhoU6eQDkmxJsNfJVD/LyZVdqWGhYvqViYl73WW9ayNPv7PRrsPzh3T7hzU97/TTOb0arYrg9OsXjcHVssaNJ9jVSvFCpudzAvO6xJCU+iaDcjq5P9WCuIWG65ZiAK4Eny8RSQ+ItFQPxyxG7GpO/OwU4PX8JUyBVID9f/pWXts+dG76s+6nqUMXhJWfh3z38lz/HJL1v2ojz1gAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/be1a4307cc5557a34c8cb1b8d4dc173d/203d3/1253.png" title="copy and cut fetchJooke function into the index.js" alt="copy and cut fetchJooke function into the index.js" class="gatsby-resp-image-image" /> </span>

Once you do that, you may notice that in your VS Code that the loader variable within `fetchJokes` is underlined as red. VS Code is complaining because the function requires the loader, but we have not passed it a reference to the loader in this file. Due to modules have their own scope, we are no longer able to reference the `loader` variable from the `jokes.js` module.

There are 2 ways we can fix this:

-   we can either select the loader within that function
-   we can pass it in as a parameter.

We will pass it as a parameter, and export the function as a named function.

    // lib/index.js
    // named export, you can have lots of these
    export async function fetchJoke(loader) {
      // turn loader on
      loader.classList.remove("hidden");
      const response = await fetch("https://icanhazdadjoke.com", {
        headers: {
          Accept: "application/json",
        },
      });

      const data = await response.json();
      // turn the loader off
      loader.classList.add("hidden");
      return data;
    }

Next modify the function that calls `fetchJoke` so it can pass the loader üëá

    // money.js
    async function handleClick() {
      const { joke } = await fetchJoke(loader);
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

Earlier when we created the `buttonText` file, we forgot to export it. Go back to `buttonText` and make it a default export.

    // data/buttonText.js
    const buttonText = [
      "Ugh.",
      "ü§¶üèª‚Äç‚ôÇÔ∏è",
      "omg dad.",
      "you are the worst",
      "seriously",
      "stop it.",
      "please stop",
      "that was the worst one",
    ];

    // default export, you can only have one.
    export default buttonText;

Why did we put the `buttonText` in it's own file? Unlike with the `index.js` file and `lib` folders which may contain multiple functions, `buttonText.js` is likely not doing to have any other functionality, so we can just make it the default export of it's own file.

The next function is `randomItemFromArray`, which is a utility function. Inside of the `lib` folder, create the file `utils.js`.

People will often make an entire folder dedicated to utils, it doesn't matter, go with what you prefer. Wes likes to make a `utils.js` file and stick anything in there and then if it gets too large, he will break it up into separate functions. We will go with that approach.

    // lib/utils.js
    // named export
    export function randomItemFromArray(arr, not) {
      const item = arr[Math.floor(Math.random() * arr.length)];

      if (item === not) {
        console.log("Ahh we used that one last time, look again");
        return randomItemFromArray(arr, not);
      }

      return item;
    }

Next up is `handleClick`.

Make another file in `lib` called `handlers.js`. Copy and cut the `handleClick` function out of `jokes.js` and put it the new file.

    // lib/handlers.js
    // named export
    async function handleClick() {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

<span class="grit"><a href="#fixing-refactoring-errors" class="hash-anchor before"></a>Fixing Refactoring Errors</span>
-----------------------------------------------------------------------------------------------------------------------

At this stage of the refactor, the code will be pretty broken.

Wes approaches it either by going through the errors in the console, or by ESLint errors. We will go with the former.

If you open the console, the first error you should see in the console is a reference error warning that `handleClick` is not defined.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1086px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:14.133333333333335%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQI102Ju1LDMADA8v8/1JUuXWFoDI7jRxpDOaeJbejQmjji6MSg0+nUXIaB2Vqyc0RtyMaQh4FsLdEYvrwnOcfSdVyU4aM/8Wk98e97z9k5pnEknEZm72m+Dweuux3X/RNF99xFy020FNGSXp75sZYi3yjtkdJJVq2og2XtJLdx5F0IZq2ZlGINgWadAqVXRCmxr4JgNOdeUXNiy4ma4sPbv64xUlNiiwvkBCk+qMvML2eX3h3yqdTsAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/daaaf44e420712e222fc30b0ddb5914a/f3a19/1254.png" title="reference error - handleClick is not defined" alt="reference error - handleClick is not defined" class="gatsby-resp-image-image" /> </span>

Earlier we moved `handleClick` into our `handlers.js` module. Now if we need to access the function in another file, we must first import it, like so üëá

    // jokes.js
    import { handleClick } from "./lib/handlers.js";

    const jokeButton = document.querySelector(".getJoke");
    const jokeButtonSpan = jokeButton.querySelector(".jokeText");
    const jokeHolder = document.querySelector(".joke p");
    const loader = document.querySelector(".loader");

    jokeButton.addEventListener("click", handleClick);

When the page refreshes now, the console is not showing any errors but if you click the button, you should see an error logged complaining that `fetchJoke` is not defined.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1096px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:80.53333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACWElEQVQoz6WSW0/UQBzF51X4BiZ+Ib+Fwhoh8oIxvoNB1CAsBiX6BC9Ghb0QwiU8YMLNZYUVuu0u7V66u7R0t9220+lt2+nUdIk+SBNNnJz8c+bk95/zMiD8jwNuRpIkQQgNw3BdR1VVhJDjOBjjf1peWFgYHx9Pzs6tfvry9PGTqclnExMTNE2HYRgEwV+WMcaWbfWw3wuxF2IHewgh13Vjmv2A/KGAEBKGZk7Qtyv6VsU+b0cv3sD8gNxoJiHps+LdJe72NHfnhXQvFcU4iGlePqzH6KD2fun74rujxbdHHz4WlnP88kEMBsDQarxGMmA0G+lhGtyPZVbA4NjawKMY3RrJDIxmB6KZuU5+k4Nja4N9A8BwOtJQKpoPMiCRiXyi74f7YeLapKK2xC/gOplZL7zKniY3qdmN86mV3HQ6P79Nv8yeTH4+nNukZtbPnqeOZzfOkpvU/E75TTo/t5qb3yklt4qv18+AIgntywbSZEvvymJL64gIQr4hldmGrOhqW5Qum11ZhmrXMaEnt+226JjQgqoiCaDKVbhKleeb9Trf6chQNxRF7apQltUrQWKoYqMpMlyrVBFoim4JVy1BrFaq9RpPnReBVSzCkxPz8ADl8zbHWRSFct/MQsH+UXAYxmUYi6bNMks0DYlCq8RIHCvXal2+TjQVEEX2ONY5zqGvu+benp0/tvb3jd1d5/S0Vyq5DO1dlH2+3r4oX7Fst1aVOdZuNoiiEEUBPceL/rttB6aJNQ1DiA3D17SerrudTnSF0EcIahrSdRshC6HAdUPfJ573E7Mi+hxzyfJmAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/6a791c7a6f66a982d52237dc61f128cf/8ae78/1255.png" title="uncaught reference error - fetchJoke is not defined" alt="uncaught reference error - fetchJoke is not defined" class="gatsby-resp-image-image" /> </span>

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1458px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:46.13333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABh0lEQVQoz23RSVOjQBjGcb5DdmiylZERA/TCYjf0wiYBSrNp1OjRizXf/z4THTOHmapfvbd/PYdXm/j5mGTToJz5ymbZRaBmYTENMkBygNNJUI48NXDlWf/TwFOmX2hDlwMoQfxo3v4E5YeRvYPyw612Bt0YdK/TvfHXDtA9YLszrXMV6VA6scRJfEkVSrlF2yB5dunBpk1YxDjlSHGUigVLBzAfonzwBeZa16a6J3SPQ0FtKha0dcqHKanmJCFxZIWMSErkDUoSRz2g6mUW1F1H9D6d4pHHdZiS1UvYvPn10VZbtzx41ZPfvi1Y7aQbWDwCJAESJhYGkgY63aGn/iyPPInKQ1QfSXkI66OV3C2SO0us7XQ3Z42JYl9QIijiDHOGBcWczUimdWxqQNFf8vlNEzWvpHrGt09z2ho4H4fVOKwm0WqEsq4je47qne43V34t874jpuFqqba22Fzx+6XaXrD2Uqwtsf4h1qZf9hzR//7T2Sk2oDSxBLjoXCfdJf/Xf8vf8S9X1W3v2g0tvQAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/b9a15d3a6e7707b9bacc6256e4e45ff8/6b95e/1256.png" title="exporting handleClick function as named export" alt="exporting handleClick function as named export" class="gatsby-resp-image-image" /> </span>

As you can see above, the `fetchJoke` function is used within `handleClick`. How do we make it available within `handleClick`?

Do we....

-   import `fetchJoke` in our `jokes.js` entry point?

or

-   import `fetchJokes` into our `handlers.js` module?

The answer is you always import it where you need it, even if you have already imported it into another file.

For example, even if we imported `fetchJoke` in `jokes.js` and tried to refresh the page and click the button, we would see get the error `fetchJoke` is not defined.

Why is that?

Even though we imported it into our entry, we still have to import it where we need it to give the other modules reference to it.

There is no point of importing it into our entry file right now because we are not using it anywhere in the page. *There is no sense in importing things into a file where they are not used.*

You simply import it where you need it. Go ahead and do that in `handlers.js`.

    // lib/handlers.js
    import { fetchJoke } from "./index.js";

    // named export
    async function handleClick() {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1098px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:15.733333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAqUlEQVQI1wXB3Q6CIBgAUN//gbK6cGurOzUD/xBEv1ySCU6cKbqlnWNxQihJgXPI2UcI3XW9lL1SrRBtXYd3H3iZUcjYM0LoVVUVQJGzgjEcBNaUxOPjMbnuEkdLwecQTZ47J/FK6ULSH6OGEJPzXWvTvAVJJecdlD3ArntrV9Jg/L1dx8tlONqj42j7MJxPa5rMvj/73hIiw2iFEWDUZKRO4gnKrVObkn+Bs53Jln0cHAAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/43df54ce2387c9aa1d5e5a1448939165/99661/1257.png" title="uncaught reference error - loader is not defined" alt="uncaught reference error - loader is not defined" class="gatsby-resp-image-image" /> </span>

The next error is complaining that loader is not defined within `handlers.js`.

Earlier we modified the `fetchJoke` function to accept a reference to the loader, but now we are calling it from a separate file.

How do we pass it? We can pass it as an argument to `handleClick` like so üëá

    // jokes.js
    import { handleClick } from "./lib/handlers.js";

    const jokeButton = document.querySelector(".getJoke");
    const jokeButtonSpan = jokeButton.querySelector(".jokeText");
    const jokeHolder = document.querySelector(".joke p");
    const loader = document.querySelector(".loader");

    jokeButton.addEventListener("click", () => handleClick(loader));

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1048px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:19.733333333333334%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA1klEQVQI1xXEwZKCIBgAYN//fdzbrtZhszG71W4q8BNK4KAmgpYysrPf4Qv6/DYA0Xk+IjRWlaZUl4Uh2JSFvl7G/KZ/f5prIRB7PqTAqCryBoiiVLF7sGBk4sjuduaUzudsPibm63M8fL8IfuNypfBGaGN33wivB03hCUTf6UBh4nXgu9YRPKWp/AjHMNRRZPZ7HsckOdTnk8iyxzFZMZrrqkfoxWtDYWuk7zvfqsBZ6yfrWrVKudb8fyEWxpwQK+cLwALgpLBKScZ6KTrOndbbPG2T/QMpYtZ+xWUkrwAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/a6c563deaea64e47d7a9a52c266433ed/2e694/1258.png" title="uncaught reference error - loader is not defined" alt="uncaught reference error - loader is not defined" class="gatsby-resp-image-image" /> </span>

However, the console is still complaining that it loader.

That is because we have to modify our `handleClick` function to accept the `loader` reference as a parameter, like so üëá

    // lib/handlers.js
    import { fetchJoke } from "./index.js";

    // named export
    async function handleClick(loader) {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:940px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:91.73333333333333%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACgklEQVQ4y5VPXU/aUBg+l/NnbP9g2YX6U5YsODMTP9Aq14tXG1uWDHez7GrJBNQLUZOR7IYsuqmTglbks6UgbaGnFGgpLSAopz1L1ThccB9Pnpy8H8/z5D0AD4JlWfhvUFUV/FlhXeJfzVdSiqJyuRzHcZIk8RzHMEyhUBBF0TCMG80AM0IIY+zxeAiCmJqc3FgPuF+8nJmacS24XC6X1+v9j7ORZSLL7I+++YVttjAeSIyxeY56tXZPObuotFDr3B5avwTKXWYT2UotyMTve1IP38cfeIrzX+w4ZN4ymwPRs92tE1h6HoLundLiV2U9YZt76FpgWUpNAcOvtgfTvT3y5tvou73Rpd3Rpd2Rt9+H3X3b1zuPFoMAPNu6k+ObYGwDPL3i5u/bJ34w5AwOOT/fZrBvGLyL9ybWgJ06dhnsCNjv2GXrCFwX/bUjcF071sH4FnjsA9PLpNMbmfr0g1g9ml4OO32RWV90fvWI8JOEP0KskAtr9nzWF5nzR4mVw1l/lFij5j7uTXwIAaMK9YqolYsYdeoVsZSjJY49bzYEHsZjyXSS6bZaDbkET+l6uYTO9I6uYIzMPF3NZUCeL3JFMZ7OlKsKe8qpuqE29EpdF6s6VJu8XBdk5SSV5MtKtlhN5CFzKtAsW9EaSZoBMJWsFQU5n9ehWGazhgQNWTYgbMlSsyxpPGffkKEruQLMCyIvVUtQYFlZELKJBLhIp5sU1Q6FjGCwe3zcoekOGW7v7ba2t7th8oIkTZq2MpleJo2yDK7IWKvDTLqYSmYPowA3NCSK3WTiLBppHxy0w+F2hOyexKoUxe7vC7FYjefKOVbnCtjQrbqK6ypuaNhoaAL3E78ETjqk79TlAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/08116cb83f214e4c69f40b27aa3b41f7/f79fa/1259.png" title="uncaught reference error - jokeHolder is not defined" alt="uncaught reference error - jokeHolder is not defined" class="gatsby-resp-image-image" /> </span>

The loader is showing up now!

An alternative solution would have been to add `jokeButton.addEventListener('click', handleClick.bind(null, loader))` to `jokes.js`.

In that example, we are passing null to `bind` because we don't care about `this` as we are not using it, and then we can pass it the loader as an argument.

Another alternative would have been to have a regular function that will call `handleClick`. We will use an anonymous function.

    jokeButton.addEventListener("click", function () {
      handleClick(loader);
    });

Sometimes you have to pass things around like we are with the `loader`. We selected it in `jokes.js`, passed it to `handleClick`, and then from `handleClick` we passed it to `fetchJoke`. We could have also selected it right inside of `handleClick` as well, it is up to you to choose an approach.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:886px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:17.066666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq0lEQVQI1wXB2RKCIBQAUP//g/KpxraHYqZSUARFydapSdGLt02zcxxDSJ2mwLkNGVCKRYEqbYWwIWulwETawG9j3jIKUVhFojmcn/f7JZEFj5xur5HRxnXBHdnJ+BUyJGtcLuzUA8+z89mb+p3OPjL+qLTX2e92HaqH0VmZK+cHdV8+vqfjK+a43eBqhf4OA/+dyIIGgpCDiC+ZOilldD5A05mqN+UA9QD1H1aans69dFKKAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/7bc39ab265fa682ab879cb28a59a876a/cc155/1260.png" title="uncaught reference error - jokeHolder is not defined" alt="uncaught reference error - jokeHolder is not defined" class="gatsby-resp-image-image" /> </span>

Now that the loader is showing up, let's move onto the next error.

The console is complaining that `jokeHolder` is not defined within `handlers.js`.

This refactor is a bit trickier because `handleClick` needs the `loader`, the `jokeButtonSpan` and the `jokeHolder`.

Do we modify `handleClick` to take two more arguments?

Instead of doing that, let's solve the issue by creating another module that will do all of our selecting.

Go into our `lib` folder and create a file called `elements.js`. Copy all the `querySelectors` from `jokes.js` and paste them into `elements.js`. Add an export in front of each.

    // elements.js

    export const jokeButton = document.querySelector(".getJoke");
    export const jokeButtonSpan = jokeButton.querySelector(".jokeText");
    export const jokeHolder = document.querySelector(".joke p");
    export const loader = document.querySelector(".loader");

We no longer have to pass the loader. Modify the call to `handleClick` in `jokes.js`, and also import the `jokeButton`.

    //jokes.js
    import { handleClick } from "./lib/handlers.js";
    import { jokeButton } from "./lib/elements.js";

    jokeButton.addEventListener("click", handleClick);

Next we will go into `handlers.js` and fix that file.

We no longer have to pass the loader to `handleClick` so remove that parameter.

Take the `loader`, `jokeHolder`, `jokeButtonSpan` and import them.

    // handlers.js
    import { loader, jokeHolder, jokeButtonSpan } from "elements.js";
    import { fetchJoke } from "./index.js";

    export async function handleClick() {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

Now when you press the button, it will fetch a joke and display it but we get another error in the console.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1090px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:82.13333333333334%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACwUlEQVQoz6VRS2/aWBT2r5tNt5Xmh3RbzbrSKKRdUXWSqGiUBOXVKJGdBATYYIhj5MZ2IH7h1yUYPzCQxDiAr32rhFSaUZf9jvTpvD6do3Ow2Tx5iOeP8fyZnxYrfg1/JlfOQzyPXhpeSovZIsHQbwBLIFxf/5jLrX8tFHAc39jYuLi4wHF8e2enViPz+c8kRR0eHm5ubhYKhVardfTtaG9vjyDOYJpiEEKapkVRrFQquq43Gg2O43AcbzabPM/X63VN02iapiiqWq2Konh6enp1dcWybJZlz2vLslwuly8vL0mS7HQ6DMM0Go1qtcrzPEmSBIEzDFOr1UiS5Hme4ziKogAAz2sjhCRJKhQKu7u7+/v7BEFsbW0dHx+XSiWWZU9OTs7Pz13X7Xa7Z2dnBEHkcrlisWhZ1qsYIZRlGUJoPB6zLCsIAgCAYZh2u63reqfToShKEARJktI0/d/BVsrFYoEQajaba2tr+Xyepuntf7dzf699Ozg63D/458uXT58+FovFIAgQQhDC1bDfe9V/gyzLYALTNM1g2n9f0v7c0d7uOB/IFGXpC3758wuWy+XKSWCSpAlcJvY7XH7zVfpjC/xVgihNls/2Sj8l2F2/b5mm4wzCcKSqiiLLnueZNhCUWxC4o9lU7xsA2KNRMJqM733f63TC++k4DAeDAWYAYFiWYduO5w6Gw3Ay9if3xnCigqB3N+6ZVs+0dGek2p5h2UN3OApDcNf3g4AXeMwVBVdVfEX2ZXncB5EzeLCsqA8iYE/1nnd76yuKo+iOOXAs01JkxzTv9J5jGkBVMWgYMX89q1SicjluNaNGPWrU43b7iePiVvOJpmdkLempmTdceq6vqb6mTk1japnZdILBx0cYjuaaFos30RUTX/OxKM44Lu52Y/Fm9v06vrlZAnuoabYkBZbtmdY9ACh6hNPpD+rBRT9V1S+KAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/dd9712c0c6b01c2dddb172d229e6f34d/525d3/1261.png" title="uncaught reference error - randomItemFromArray is not defined" alt="uncaught reference error - randomItemFromArray is not defined" class="gatsby-resp-image-image" /> </span>

Now it's complaining that `randomItemFromArray` is not defined in `handlers.js`. Import it from `utils.js`. üëá

    // handlers.js
    import { loader, jokeHolder, jokeButtonSpan } from "elements.js";
    import { fetchJoke } from "./index.js";
    import { randomItemFromArray } from "./utils.js";

    export async function handleClick() {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

When the page refreshes, if you try it again, you will see another error ,this time about `buttonText` not being defined. Import `buttonText` üëá

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1094px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:74.93333333333332%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACl0lEQVQoz52RXU/acBTG+/V2u8+wZBf7CrszLsY7o1fGzHVVUVFRg0JbQDSEIipmodDSN2jLn75TQIr/trRdhGRLtqvtd3GS85znuXkOkvw7cRwnSWLbNpIkSS6XW1lZ2d7eTqVSR0dHl5eXm5ub5+fnh4eH3xecnZ2l0+nUwcHW1haGYaenp57nDYfDt7Cu6zRN393dPT09tdvtRqNRr9drtVqzSRcXsCxbIMnrqyuSJAuFwuPjYxRFjuMgBEFgGIbj+O3t7cXFRSaTKRaLyxVFUYqiKpVKbgGGYeXyzfHxMYqi2WxWlmWEoigMw3Z2dnZ3v2IYtra2Vq1Wa7UaTdP5fL7RaDw8POA4ThDEyckJwzClUml9fT2dTgMAkL+bYBimUqkUCuT9fb1cLuM4TlEUhPCX4XdhcRxHUbSc8/k8SZJ6vb7saWNjY39vb/XLKoqis9lsGYvjeGmzLQv571eZpon8fUmSJLCn3Y8Z8f0+9+7bKMu+yVH8R9jzPCQIAgih7/tBEIRhGAZBGM+hNVE/57ufMvyHtFvkoyQO4JvBh9CHMFgAIURUVZUkyTRNQ9dZlhV43jAtlpeeOVZ7cY2JzXeFvgoMwxxNJq4sW6LouK5t25qmIZIsi92uMhgoAGim6biuNhyL2ojpGSJw2p2OpA5YWWd7miCKpmXphqGoah8Aut1GrFbL5Lkh13EFYToAHgCe3HsdgFdV9rqSzTJDXjC5rquZgOeBIFiyrEsSEARHUZC5IMyq1Wk+5xHE7L7m3dxMSXKcu56WSv5zI2z+CFvNSOBCDdg8p7OMI/AOx70ocjJykWgyCW07UNRXlp01m5DnYafjtVpQlCAv+KIY9Ho+AP0Op0uS2+/bsjxW5MTzovH4J6b5Cl+OUEnkAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/2b2906e066f0c3e5ef6379d180ebd894/6937a/1262.png" title="uncaught reference error - buttonText is not defined" alt="uncaught reference error - buttonText is not defined" class="gatsby-resp-image-image" /> </span>

    // handlers.js
    import { loader, jokeHolder, jokeButtonSpan } from "elements.js";
    import { fetchJoke } from "./index.js";
    import { randomItemFromArray } from "./utils.js";
    import buttonText from "../data/buttonText.js";

    export async function handleClick() {
      const { joke } = await fetchJoke();
      jokeHolder.textContent = joke;
      jokeButtonSpan.textContent = randomItemFromArray(
        buttonText,
        jokeButtonSpan.textContent
      );
    }

Now if you try it, it will work!

<span class="grit"><a href="#recap" class="hash-anchor before"></a>Recap</span>
-------------------------------------------------------------------------------

So in this lesson we chopped up the code into separate files.

Sometimes for beginners it may seem harder to do it this way because everything is in different files and you don't know where to look for things.

That is where you need to get good at following the stack trace and seeing where errors go.

It is much better for maintainability and shareability to go with this approach than having it all in one file.

Find an issue with this post? Think you could clarify, update or add something?

All my posts are available to edit on Github. Any fix, little or small, is appreciated!

[Edit on Github](https://github.com/wesbos/wesbos/tree/master/src/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/80-dad-jokes-modules-refactor.mdx)

[**‚Üê Prev**](https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/79-currency-module-refactor/)

Currency Module Refactor

[**Next ‚Üí**](https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/)

Bundling and Building with Parcel

### <span class="highlight">Syntax Podcast</span>

Hold on ‚Äî I'm grabbin' the last one.
