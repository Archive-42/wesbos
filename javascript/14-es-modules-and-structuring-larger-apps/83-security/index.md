






(https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes)
    1.  [Data Attributes](https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes/#data-attributes)
-   [Creating HTML<span class="videoNumber">Part 25</span>](https://wesbos.com/javascript/04-the-dom/creating-html)
    1.  [append method](https://wesbos.com/javascript/04-the-dom/creating-html/#append-method)
    2.  [insertAdjacentElement method](https://wesbos.com/javascript/04-the-dom/creating-html/#insertadjacentelement-method)
    3.  [Generating An Unordered List](https://wesbos.com/javascript/04-the-dom/creating-html/#generating-an-unordered-list)
-   [HTML from Strings and XSS<span class="videoNumber">Part 26</span>](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss)
    1.  [document.createRange() and document.createFragment()](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#documentcreaterange-and-documentcreatefragment)
    2.  [Security and Santization](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#security-and-santization)
    3.  [XSS (Cross Site Scripting)](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#xss-cross-site-scripting)
-   [Traversing and Removing Nodes<span class="videoNumber">Part 27</span>](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes)
    1.  [The difference between an Node and an Element](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#the-difference-between-an-node-and-an-element)
    2.  [Properties to work with Nodes and Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#properties-to-work-with-nodes-and-elements)
    3.  [Removing Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#removing-elements)
-   [Cardio<span class="videoNumber">Part 28</span>](https://wesbos.com/javascript/04-the-dom/cardio)
    1.  [closest method](https://wesbos.com/javascript/04-the-dom/cardio/#closest-method)




##### <span class="grit">Module 13 - Ajax and Fetching Data</span>

-   [AJAX and APIs<span class="videoNumber">Part 74</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis)
    1.  [What is an API?](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#what-is-an-api)
    2.  [JSON](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#json)
    3.  [AJAX](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#ajax)
    4.  [Public API list](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#public-api-list)
-   [CORS and Recipes<span class="videoNumber">Part 75</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes)
    1.  [Query Parameters](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#query-parameters)
    2.  [CORS](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors)
        -   [What is CORS?](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#what-is-cors)
        -   [CORS policy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors-policy)
    3.  [Babel](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#babel)
    4.  [Browserlist](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#browserlist)
    5.  [Proxy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#proxy)
-   [Dad Jokes<span class="videoNumber">Part 76</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes)
    1.  [Headers](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#headers)
    2.  [Getting a Random Index](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#getting-a-random-index)
    3.  [Loading State & CSS Loader](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#loading-state--css-loader)
-   [Currency Converter<span class="videoNumber">Part 77</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter)
    1.  [Caching the Rates](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#caching-the-rates)
    2.  [Converting](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#converting)
    3.  [Hooking Up The UI](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#hooking-up-the-ui)
        -   [Input Event on a Form](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#input-event-on-a-form)
        -   [Wiring up Handlers](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#wiring-up-handlers)
        -   [Formatting Currency using Number Format API](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#formatting-currency-using-number-format-api)

##### <span class="grit">Module 14 - ES Modules and Structuring Larger Apps</span>

-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules" class="currentModule">Modules<span class="videoNumber">Part 78</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#what-are-modules" class="currentModule">What are Modules?</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#use-cases" class="currentModule">Use Cases</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#modules-in-the-browser" class="currentModule">Modules in the Browser</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#in-the-past---sharing-javascript-code-between-files" class="currentModule">In the Past - Sharing JavaScript Code between Files</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#setting-up-server" class="currentModule">Setting up Server</a>
    4.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#importing-and-exporting-modules" class="currentModule">Importing and Exporting Modules</a>
    5.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#things-we-need-to-know-about-modules" class="currentModule">Things we need to know about Modules</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#scope" class="currentModule">Scope</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#difference-between-default-and-named-exports" class="currentModule">Difference between Default and Named Exports</a>
    6.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#renaming-modules" class="currentModule">Renaming Modules</a>
    7.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#more-ways-to-import" class="currentModule">More Ways to Import</a>
    8.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#loading-javascript-on-demand" class="currentModule">Loading JavaScript On Demand</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/78-modules/#async" class="currentModule">async</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/79-currency-module-refactor" class="currentModule">Currency Module Refactor<span class="videoNumber">Part 79</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/79-currency-module-refactor/#bootstrap--app-init-functions" class="currentModule">Bootstrap / App Init Functions</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor" class="currentModule">Dad Jokes Modules Refactor<span class="videoNumber">Part 80</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/#refactoring-into-modules" class="currentModule">Refactoring into Modules</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/#fixing-refactoring-errors" class="currentModule">Fixing Refactoring Errors</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/80-dad-jokes-modules-refactor/#recap" class="currentModule">Recap</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel" class="currentModule">Bundling and Building with Parcel<span class="videoNumber">Part 81</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#benefits-of-bundlers" class="currentModule">Benefits of Bundlers</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#bundler-options--alternatives" class="currentModule">Bundler Options / Alternatives</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#using-parcel" class="currentModule">Using Parcel</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#dad-jokes-module" class="currentModule">Dad Jokes Module</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#installing-parcel" class="currentModule">Installing Parcel</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#adding-an-npm-script-to-packagejson" class="currentModule">Adding an NPM Script to package.json</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/81-bundling-and-building-with-parcel/#building-with-parcel" class="currentModule">Building with Parcel</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages" class="currentModule">Using Open-Source npm packages<span class="videoNumber">Part 82</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#node-modules-folder" class="currentModule">node-modules folder</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#using-third-party-packages" class="currentModule">Using Third Party Packages</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#third-party-node-modules" class="currentModule">Third Party Node Modules</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#waait-npm-package" class="currentModule">waait npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#faker-npm-package" class="currentModule">faker npm package</a>
    4.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#commonjs-syntax-vs-ecma-script-modules-import" class="currentModule">CommonJS Syntax vs ECMA Script Modules import</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#date-fns-npm-package" class="currentModule">date-fns npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#axios-npm-package" class="currentModule">axios npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#lodash-npm-package" class="currentModule">lodash npm package</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/#await-to-js" class="currentModule">await-to-js</a>
-   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security" class="currentModule currentPage currentSection">Security<span class="videoNumber">Part 83</span></a>
    1.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#javascript-is-public" class="currentModule currentPage">JavaScript is public</a>
    2.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#xss-and-sanitizing-your-inputs" class="currentModule currentPage">XSS and Sanitizing your Inputs</a>
    3.  <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#farcebook" class="currentModule currentPage">FarceBook</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#image-event-hijacking" class="currentModule currentPage">Image Event Hijacking</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#sanitizing-user-data-with-dompurify" class="currentModule currentPage">Sanitizing User Data with DOMPurify.</a>
        -   <a href="https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/#https-origin" class="currentModule currentPage">HTTPS Origin</a>

##### <span class="grit">Module 15 - Final Round of Exercises</span>


<span class="grit">Security</span>
==================================


JavaScript, ES ModulesEdit Post

In this video we will discuss security in JavaScript.

Much of security comes from running JavaScript on the server, or any server side language. That is where most of your security comes in, in things like encryption, certificates, firewalls, whitelisting IPs, rate limit, those things generally all happen on the server side.

However when you are writing front-end JavaScript, there are a couple of places when you are building stuff in the browser that you want to be aware of so you don't accidentally shoot yourself in the foot.

In this video, we will go over those things that you should be aware of so that you do not accidentally commit security violations.

<span class="grit"><a href="#javascript-is-public" class="hash-anchor before"></a>JavaScript is public</span>
-------------------------------------------------------------------------------------------------------------

The first thing is that JavaScript is totally public. What does that mean?

We already know this, because if you open up your dev tools, and go to the sources or network tab, you are able to see all of the code that is related to your website. You are shipping all of your code off to the browser and telling the browser to run it, which means that your source code is not safe.

You **should not** put sensitive information in your client-side JavaScript, because even if you obfuscate it, and try to hide it in a whole bunch of ways,or encrypt is, if the browser can read it, it can be reverse engineered.

An example of that is API keys.

Sometimes it is okay to put API keys in the browser (we will look at an example like that), and sometimes it is not okay to put API keys in the browser.

Generally, when it is not okay to put API keys in the browser, they will usually restrict you via CORS.

Something like a google maps API key, it is completely find to put it into your client-side JavaScript because Google will limit those per domain, or per visitor so you don't have to worry about that.

Another example is links to private downloads.

Let's say you have an object on your page somewhere and you need to be able to download a zip file of something, people will be able to find it.

Prices are another big one. Wes runs into this all the time with his courses. People will building a client-side JavaScript checkout and they will put the price in a button, for example. If someone is able to change the price of that button or change the code, then they will be able to change the price to whatever they want.

When you are working with prices, we calculate the price on the client-side so we can show the total of the person's cart. However, you should also recalculate the total on the server where it cannot be tampered with.

Anything that is sensitive must be recalculated or done on the server, where it is in a secure environment.

<span class="grit"><a href="#xss-and-sanitizing-your-inputs" class="hash-anchor before"></a>XSS and Sanitizing your Inputs</span>
---------------------------------------------------------------------------------------------------------------------------------

Wes has created this little example to demonstrate the concept of Cross Site Scripting (XSS) called FarceBook.

On a lot of websites, it is common to give a user a place on the page to fill out information about themselves, like a bio, and then in turn display that data once the user submits it.

In some cases you just have a text input with raw text. However, in some other cases, you want to generate HTML or even take in HTML from the user and display it on the page.

We have done this in a lot of our previous examples, when from within a loop we set the innerHTML of an element.

**The rule is that anytime you are taking data from the user and embedding it in HTML you must first sanitize it**.

Anywhere that you are using `.innerHTML` or using `insertAdjacentHTML`, or really ***anywhere that you are taking user data and generating HTML from that, you must first sanitize the data***.

<span class="grit"><a href="#farcebook" class="hash-anchor before"></a>FarceBook</span>
---------------------------------------------------------------------------------------

![simple example showing the issue when user is allowed to type](https://wesbos.com/6671635303db73c5ce09dd6edf4e6990/farcebook.gif)

In this really simple example Wes has made, FarceBook, there is a field where the user is allowed to type and when it's typed, we are automatically dumping that into the profile on the right hand side.

The data could be coming from anywhere. Most often the way it works is you give someone a field to type in on the backend and they save it and it displays on their profile page or on a form etc.

You may want to allow people to put images tags, to be able to use strong, emphasis and mark tags, and things like that.

We could do something like add a style tag and make the background red. Then we can tilt the entire page.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1220px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:125.33333333333334%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEbklEQVQ4y21UW4hVVRhemppiEZEg9SQoY9ZLIVkpSg+FRdFDSG9F9x6aInCk0JeCegisMMOH6EEsCiwMSlMYR8+M45yZM7PHuR3PmTn3vdfeZ599X9d93yvOnNEYmI/FYq2H71vf//8fCwStlt9sonJZnplryophWKRcJYVJUi661aZXMdqlplMpxbVFVllCSzWvUvWWKpokoXoDZBs3iC33ZgAEX5+0k0SHmnX5Gvn4aNa3Y2TTfqnvR+mJ73ObXyps2Gat2xLfA8TG9WLzpgwAvG8fEOvWCQDEfQ/QmSLPUuS5duDLmBjVRumXS2Pvnprcf/KPTa9c3vrB+EMnClsOl8FWb32XQp98EoiNGwQA/gsvdzChhHDOKSYRpzzgXsg1S29Is7M/nB05/MXko18NPXjs1/XPje3+fPr+Z0tPP79C5j+ddZIk5Jwx5rhu4LMsTUQmwiAkvh/58WIDStfy41+eGTx0fOqZMxN7Tl96agAIAOJt2/WFRcNzMUJJnKRpGscJxoQxFsexEAJp3o389I25+px8obj41syV7yb7v71y5KNl8pvve2nWrNdVVXVc1zRNxnmapmEYhlEokszQ8GSxMjg8MTz6z0L5G6n0mtS4dmuh2iW7v1+wojCLY5FlYRS5rttqtRRFYZzHSRzhsFhqQo+3kV/VcBsL1Q7LDV1aWARZ3+NO21Q0Vdd1xniSJGIZvu9zzn2fU8ufXWzmxqWJ2VK5pbVMDzpMJ5FiuCA8ehwJgWwHIeQ4jqqqhmkyxlZUwqRRbcsO7ZCoAo3hiZliqahZFnSDumqAZGwqFYIRQhljjGNMEMKUUs/zCCXUogWpNDRWkIrVUrOteb6OfM3jqus3NBNkSSruIEmSnlvOeRhFSRx1ZHtUmr85NbekGLnx6VxekoqVcqutoaBLFlkmhMiW97uI4xgT4hmOrhPo+bJJum/iULbpfEUeHpdGpfka7ACxirVKhVpU7hDoUOgwaFPF7h50HLZR0DRxHRpArIWuQJqZ0FYsBzpMcRi8s5RlFc3z6217bXLXQSiKI+dalSFEvbbtQof+L2FTSKJWfgqsSexGUkelq/2tfL9Z/ZMZV11zQTUN6PjdKlym2tQYOAbWdp2Idq1Zvdmv5V6sXXyv9ver1dHTsBsPDi2sBMIYHkMHDoC1yhUBCq12zTHmtPmfi+f68qcers2eh0hAm0ATy0Lggc/orp1gLcsCd1jb0pEnE2uWzL9hTL+znCofLjdcQUHct5s8tmdlzqsQJLUlVXaYQUMDEdOCunobOqTbKhMroegM5gQAeO9e0EuW6CV5WScm0Wj+1sWruZHCzEIdKjaGNlqZtonlRKBPPhW9Pyw13eyu3TQVaWprSENhVbPzM7f/ujx4PT8lW7jbKptCz4eaFe3cKQAIDuwH6fZHkrc/TP4dSv2wa4JHmoZkh2me36GxjsOG7vay1XvW/O1898MEID10CPROGQDJjl3pwAl6vaBYq/KkunzlahElEPTI6z1KcvDgfyem4ziYifpDAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/5742de91cdb46d5b133126c8456a48fa/cd138/1312.png" title="add background as red color and tilt the entire page" alt="add background as red color and tilt the entire page" class="gatsby-resp-image-image" /> </span>

That is not something you would want someone doing that and that is probably the least of your worries, someone goofing like that.

The reality is much scarier security thing is if someone can run JavaScript on your page.

Anytime a user is able to run JavaScript on your page, then you are in trouble.

Let's try it by adding a script tag and seeing what happens.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1226px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:124.53333333333335%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAZCAIAAAC+dZmEAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD70lEQVQ4y5WT3U8cVRjGN9EmtQ1JrbHEmlhj0xsv/EATkcY7/Qe8MulFowFjmyC1kFpREBWLLdVWaKViNQa0haWxBBaoQj+AJbIsy7JLlx2W/Z6ZnZ3Z3fk858yZ2fnQ3WJMjEm3z8l57355n/dJHsfZ3ze7JoiuifDJXz3Hryx+3T/tOjs+0TM1dH5yoNflOj3mOjP2c+/48IWpiYs3xnqnfvxucrRnwnn62rVvRx0vdVx9ru3Kq1846zqdjzRdr93f5t3+kf+ZMxd2NLdUHfZt+9i3rbVpx6G+Xc2B/d0z1e2Hdr41+2TbyoFzA1X1jvf73ccuLzR+P9/Yd+edSwsd7b9NN/4yfWxo6MTwpfcuu5qGXc0jPScGB1uHb7Q6r3840n3y6mjLyMSn44MfDDiwrIi5nMByHE1LOU4QCok8E+cyWbmAVM2fJOcTtDc259087Im+uRi7uBAmbxPrN++GglzeoUCIVAyRCpCqYWSZpm3ZtlX6pmqs+ojpWe/MnZsrwbEEPR8jQxGyECW5zTSXZASHLMsIIQCAKIoYIV3TMNawii3bLkI9nsyFSZZIsQkOMcCmRIMSESWotKiSAnLQNK0oiq7rCgB6sYgxRqqKELJs24A6EaHW4tQGyfo3EgEiRjFMugDTBSVdACQPHTwvAACtsgzTtCzLNE3DMAzLxDLejDE+Iu4nEp4gEdhIMFwuI2kZCVMCKsEsy2UymWw2y/M8wzAcx4llAQiUgpJIF6KskOCkJCdFGT7C8ESaJdJsghUpATlUVZUkSflHPM9jjEuZ2bapGv7VyMzCkns5OL8cvP3nindtw70cnFsKrCcZWlQdJEnRNJ3L50s5YQ1AiLFmldK2DVQMhVNzy4FUTs4hk0MmI2u0qP5rW5IkjLFhGGb51nsH67quG0VNwWGCXFwjPKGoNxRdDIQJkiN5mM4rJA9LcMm2LMuyAgCEEAIAEEIQQlESLWye6jxXU3PwtbrXX3ixtnrv0/2DzgK2kzl5C7b/V9bWa//k1FMHnn90V/XuPft2Vj1+vu8nQa8Qtu2W4221r9Qdbag/0tCw94l93b39YrEC2LRM27br3z66+7E9rS3tR95teujh7V3f9IpGxZs/a//q2Zq6zi/7Oz7ve/ngGz8MOguanbovbNt2EWgpko9zYionp/JKkivNe9j9YR1o2RxkkUnxiBJQuRKoUthAxbvrSX8kSQkolVdS+a0+VAZDPbKZWU8zjKwzssbI2gNsLkKd2KBCKWYtRq4QcX84Hi/3oSLYRIbPF/7D7ZlxL03ecs96VhOVwzrQGA5mYTGr6CwoMor+ALZ1oJG0mOZBuhzVf9L6G/4LSOkCp8PPePQAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/e4b7d88b55bd2ab4333f0df55572cb5e/e9140/1313.png" title="anytime user able to run javascript in your page then you are in trouble" alt="anytime user able to run javascript in your page then you are in trouble" class="gatsby-resp-image-image" /> </span>

As you can see, even though we added a script tag with an alert, there is no alert popping up. That is because script tags will not run.

### <span class="grit"><a href="#image-event-hijacking" class="hash-anchor before"></a>Image Event Hijacking</span>

But what you can do is take an image tag and hijack the onload event of the image tag and then within it we can add any JavaScript we want.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1128px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:67.46666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACV0lEQVQoz2WSy27TUBCG/QiseQLWSAUJiQU7ngDegQVCQgJVQrBBggVUVVdsC2yRKLfeSS+paVI5aRLamKRJfHLi+7HPzfZxLrZRnCIE/fRrNJuZ+Wc0Ug14NeBVus6m0to+OoUD3cOEMM54wIJcfxLCOKbccJHSBuVmR240pVsLe3MvCreXitdf7tx9Ixu2Y9uWbTuO404mkzRN0yQ9j5Mky7KgAh9febR49VlhblG6Nr9848nbm0/fz80v31n46PokFiLLsjRNs3+J4sSIM1+GDy7de3X5oXxtSfpUbH+ROyv77Q8F9duBOh6PswskeR+lN7r/Llg7tLf2jldWlfXVijSOg5D5nCDmO75ruQiZlmWa5kDXke9Rh5yonXL1tHZSLimvd348P1QWD6vH5YYqVxsSJjSKRBBGhAVhGKajaDZtZjv2RanS3CiW1nYPynVFxw70XM3lAAXA5RLGJMyhlDLOh8NhFIkoikS+ufBDYFGAmOZQDYUmTyAZQj+cSQIAYIyHo1E0RYzyRORkWTYkceMXUJqd+lm/1tLk6gmA/QFi0I+mxQFnsYguHmlme4iF2jWU07NaC1SanVJd7Rum7nGI8+Jer6dpvX4f2o5jGAaE0EVTPM/jAce6Bx2uU6EToZNYJwJ4oYa45lDgMsnUB6Db1XXdyp8DQmhaFqU0SaYvEWNRrqpfv++X6urGfunz5u6B0tg6KG/LR+u7spQlk6kueE6Tc9vVn53VQrE1cHUaD3D0V0RIhFLf9xFChBDO+SwyxjDGnu9xm2omaRsITI8U/qffnGmytx5k+mUAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/7df66df387da0c8edd2201805398b4a1/7bf07/1314.png" title="image event hijacking" alt="image event hijacking" class="gatsby-resp-image-image" /> </span>

If Facebook allowed that, then you would be able to run code on anyone who is viewing your Facebook profile. That is not secure.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:624px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:97.06666666666668%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAADb0lEQVQ4y42TW2gcVRjH50lEsCAWhBKfjG0FEbGIYkWNFUFEUaqtiq1vlgWxCPbBUgRBLVFQBAWRKvRJt9VQWJum1N01aZNNskmz1273fpn7zM7MuZ+Z3bnI7qb4mj8fh+/lz/l/v+8cQZZEZGpms66qcleUuqouaaas6pblMO663sD1Btz1ZM3sqYYJgIWQDgEPhn8n/xUWtnqLNftqXvl9sbJxqwUAQJhAhBGmmFBC2agIA4gCiAvF5nLmVuafzc107tfzc8KBzy/sO/PXc7OJ6c8unksXgalLsmIYxnDoR1EUhmEQjI4wDKIo+uXFb2N3HU8+/k1y/9ljDxwVDs9eOvL9wns/LLw+m0hk61EUctcNgjC6o0m31gpX69HcqYtfznyVPPLb0jvnPzp4UmjUxG5bq9fESrktSxpjDEIIAMAYc8ot29b0vm01f04kv/tzfrWylSy3rtwsrbSkc4lrgmHojFGMEUSQIEAJwYRgjJnLkYEy2eLVxWzqxqV6+w9RnSvViuWGUrjd6ihWPHFN0HV9MBgQwiBEQ5eH48RhOArrAl5pqvlGN1eVun1PJZGChgryJMChH8Xn00Kr1SaEcM4Rwq7n0RHbEeUoirjDqh2trlht3Sm3pXpPFg2rZ9G2AS03jF9OCt1Oh3M+ATtREAS+7wdhwGxWqHYz+cp6sXo9WyxVG2rfloDbs4jtRfHLKaHVaMiSrKqqZVmKovT7puM4tu1ggm3F7qig08e9UZGWARuqU5f7NblvuVF8PiU0a1Wx3dY0TZIkWVYMXQdjMU6pRVc2ysmVjRubxaX1/OJabjVfWcrmr28UTOrHr6QEXdMYpWNmhFLq+/4k/GhmwDdLzeWtsgy4hgcaHkgOkxy2HXs+JZimiTCGEDI2QoUxJoRACB3oIAPebiq5WqfQkktNqdAQOyYSbdox0bYZYxyGoT9WMNaImR8EYeBBLxb79MkDzz791At79z22/9EnlnMVnQzbBtw2E0KiO4v9/0lu79k99kFs956H79u1+977p/ZMPZRey5ks2JF5iIeH3z7+0syhj2Mn3j/67tSD0+n1/E7NAQ2eOTizd/qRL06ffe3Vt+6+Z1cqc3PHN5PhhydOPv/yGz/+dOGTU18feuXNTH4HM0/+IbOZbDEVeTJgCuAq8kSbjmj38cT8HzxOyk3BFoeoAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/7597a96efbde645dd5873d0efd084877/39c09/1315.png" title="send $1000000 in alert using javascript code" alt="send $1000000 in alert using javascript code" class="gatsby-resp-image-image" /> </span>

It is ***not good*** to have someone else run JavaScript on your page because then they become a puppet of your own account and they can do things like click buttons as if they are you, or grab your messages and send fetch requests back to their own server.

The `onerror` attribute of img tags will also run JavaScript.

Let's say you set the source of the image tag to be an image that doesn't exist. That would cause the `onerror` attribute JavaScript would run.

Using the onerror attribute, we can trigger an alert like so 👇

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1230px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:74.4%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC6klEQVQoz12SO2wUVxSGp4qoEB1EoU4RRTSpaKIoHSDSpCQFQbKQ3KUJQdAgA7JSUJAoFFhCIpFCgAJBpDiA1178tjdr78vrNbtZ785rZ2fu+zV3ZmcnmV0jWXz6i3ul++v855xr9H0f2o5br3ctu90xrZ5ve8D1fACA1no4JkkAwh2n3wcYIBpkwhBTY7Hh5+veXMX6401to9r0+h5EBGLCuDgszDhhot62clu7uY3yn6+XFjbLxunpV5/d+vvLO7lPb8zO5HclgX0/8Lx+GKo0TZMkyQoPk+FgkKZpY3pu4silxY9vF0/dffLRVePc1OPzN59+devpF9d++z1fHRmG6SGGo9u/XpJrp2v31idP/fDszM+zFx7OfD5tdCzY6vTftnuV3a5l95WSjHHOuZBCa80Yx5gpGfy1Wb7+69pKtbC008xt7eQKtfW3XSPSUgqqBJOCcooJpRgThDAmRGKxXdqbXystrL6u1H4xzfuVxmypYZb32lu7rZYLDIyxUooyhhDWko1DJ0mS5ZeDam1/sVhZLNTKLeCw1KaJS3UmFtlYGY7jUEqVUhgTFYacc0YZISQZJhHXXQt1IDchb3uw5fpdH3UBH8sE3JBCxnGcvsdoSAMZl8rN/GZpfbs+t1xYLpRsy+xCYQJuQmFCYdi27ThuEAQIId/3AYAIIQgh44z62PGYzbRDQmeU1sZhdiahhWRmhggFQcAoZZxnc8IkjqNhki0oFlGp3FoqVpaLtfxGaW5lc217Z371n9xKodqysp49x0UQSKWklNmGhJRSUkopo4rIYrHx/NVCpWk2Xbhn+a0eajqg6YB9n2aVg14P9HqBHwAAIITjLx2GoY61psp2iYmFJwZApyhKeyyysHKwOogdjZ5GIwbviKNYx1Gqhw9mHl38dnLi8nffXLx89vzXj1+89GXSCdjBwIQQlDLGmMiQ49ycc0xwqpMr3099ePKT48dOHDt63DA++PGn+yhKx5n/N/8H2Y8PEYngLc4AAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/87f15e3ddbdaec81f969bed12f378936/0d0e4/1316.png" title="using onerror attribute we can trigger an alert like this one" alt="using onerror attribute we can trigger an alert like this one" class="gatsby-resp-image-image" /> </span>

That is how people do **cross site scripting**.

They find a way to remotely run JavaScript on somebody's page and almost always what they will do is just hook up an image tag and say `onerror` of the image and then fetch malicious JavaScript and then you have someone you don't trust running JavaScript on your website to logged in users which is very very scary and very bad.

Even if it is just a tiny little input box, you have to be careful when you are taking data from a user.

### <span class="grit"><a href="#sanitizing-user-data-with-dompurify" class="hash-anchor before"></a>Sanitizing User Data with DOMPurify.</span>

So how can you **sanitize** user data?

Luckily there is a very easy library to use called **DOMPurify**.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1182px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:105.33333333333334%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAACgElEQVQ4y32UCY7bMAxFc/8jduJ4ieNVIiVS1OYk08pO2hmg7YNhQAZEfi7fJ++DD4GYp3kZp3le1mVdx2nWYJZVj9MMSBotoNXvR4EZxmm8DaeUUoxRRJxzRMTMzjkR8d6HEHLO97+x5bxt20kppXfmg2UpHwDWdUkpff6XU9d1ddP0/e1SXa5t2zXNtWn77joM4z1vKcS8awspxZS+Jn8+nyfnvXaskAgpoQ1gosZADg2LQq/QKSBAIFJERzkHj8fjhIgG0RqjQaO1sB/AADMZIkPWElkiNGgQPp/Pb7LrpvlxuZyr+vxx7qpL83FufnzUVVU3bXu+dOeqqy5dVdcf56qukTnGmHZK5pgzx2jZC8vmJLPbyGUJTnzmcsxONvFZPHuvibz3cecl2xrjmL0IGkPMhmmXatFajQjGGLKP74Jfsp1zpWxjgEgTWyLWpUMagIhSSiGEGEJ8k96UzCJSQhMhs+ZyWdAwIiA459Lf+CObme0OMwkz7711ztnSZjp2zloLAMcKGmNE5CV7GIbr9dr3/TCW1e5vf2jbtu/7tm27N+1O13UAUJZkmiattVJqnud1XY/3QYwxhHAsBu9DOt4hhG3bSuZjsQEAEZVSZgcArLUxBO+9e2OMKVGIymi8f10GgGWe1R5AHz4B0IjzugLikeqQEGM83HZ45gQAWutVKbwNsLtqWZZ1Xc0w2mk2iCKlj4dnD8M653LOr8w5F8dsMeYvk3x4/9wt9TvzV141l1A+RB+ykyw+hyDei/cmeErRv/8H23dyzmXO1vIwzn13net26Id2nK6321hs0Z27bpxn+Qf3+/30exPYsRWxe21CLMS0Gzj8g1+ZfwLo2Kf88NofXwAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/8df29abc4aa6121c57e64497e4bd04d9/7161f/1317.png" title="npm package DOMPurify" alt="npm package DOMPurify" class="gatsby-resp-image-image" /> </span>

It works by taking in a string and scrubbing it of all the security issues for us.

Wes has already npm installed DOMPurify, and at the top of the file he has imported the `sanitize` method from DOMPurify.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:93.86666666666666%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAACvElEQVQ4y52S6W7jNhRG/QwTa18iy85IsixrFymJqzavsuMEmX9F2/d/iUIOkqLpAAMMcEBckji4Hy84CwlSA2B4meRmopPOvycPT/EiIXbGVjlfJOR9ldxUvCM4ieoXegCVdT6Tw/apaoph75DRxs9L8rqkr2Z5tuDOLA8muZh4NNBFBeMnGrzo5VWF19k3Bywq+lTvtXyv5bsVvqzwqOc7s+g1cDLw7ZHedHRT8pMUH+X0KCdHJTvJ2VEpxtl8XaoRXhWlXWCHPGsxt8DgsZdVdXIA9EvgQegCYJXEbgYLNTZrjZKbGRG3bJK1iKQ03xKanv7a8Nt3dISXv5PDHyknVVfADsIWBhS5+513Pnhdr4NWS5kc8dmDVxoJDwhxURN1V5+d7Zxu20vYv3qkC1kZoNqv0RbXblmbuLNQZ5HeglyJ7p2NhLn8LRzeUo7zrsmHQ0RxgJHXj87uaoHRg9yFxEgHM2ZySDXQqFkrhfweO6TLoluis54frPJsV6OWDka+s+FpAQ7L6rQCyCnrR9Auc66nzKhaLe/kuH9/M9Vi9rDB8ztTEZCJqSb3Q/qwYcKGzgMiBlTYEGGDxaibiZvKTJtp9PBFLW9acdDgWYMXNT+q4KyBUQbPcnmT04O0JeKWfkA+5ISv8HVVn9YI+Qita+TXlQNqt8Lrmi7QftHsl2BQYyoEnzKVQjbJVtEYWa9nvZkSM0WPGTXBUcsGMSTzKSERAyIEVPi37afsV3bd+s0tPvzp0x3uEtjBpNsnTePCSgetXnEpZGbG1LQV/+vPpE1tAiaFfMuamNEt34XdNWzP6XAJm6vfvQS7123/w8WDEjdfZXFTm5DqSW8kjRJhOWqUuPugVaZtqyWtHLEvse+yXy8rZqRcCPh9HkQIfspX812u9IwKAfn/3S+ZPsk3D4q/Lc/X5e/J/wCKR9rgajzqlgAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/573eaeceb9b8a4ae1396ae09cc7ed12d/aa440/1318.png" title="import sanitize as named import" alt="import sanitize as named import" class="gatsby-resp-image-image" /> </span>

All we need to do to fix the code is modify the input event listener function to use the sanitize method.

    input.addEventListener("input", () => {
      const clean = sanitize(input.value);
      output.innerHTML = clean.replace(/\n/g, "<br>");
    });

In the code above, we are simply replacing line breaks with a `<br>` tag so the HTML is properly formatted.

If you try adding an alert in the onload attribute of the image tag again, nothing will happen this time.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:632px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:61.06666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABlUlEQVQoz51Ta4+bMBDk//+39tqTelICgSQEDITgBy9DIFPNNpzuw1XV1dLK9o69np1dB/f7HY/HA+u6whiDYRiQ5QX2UYyXn694+fGKMIoRHmJUdQPjOmjbfmrEAq01sixD0zToug7jOMpsjIW1Fm3boe97sbZtZd8KbmT20wTvJ4zeo2wsguv1iiiKcK0qYfm/g1mWukPw1Ut/83FWukdgtMav799wOkRYn1pumm7rbc/x0b8syzu2LCsyBmTKcbhHfkmRpqmkf0wS0TTPcxyPR/Gfz2fw7Ol0kjPEwjCUc8TKskThPAIKGx1i5EoJsNvtpChKKTH6GIQzC0g27AwaGX60nAxLpRDv92K7tzepOC1JElwuF2EQx7Gwoa8oCvHVdY15njchJXUJOPcdJmcxOYO57wXn6zy86bWx8d4/9Vo+LVrGKnd9j7wocNMaZVUJO77OtMmGQbinZnyEWpEhjZJUzzvWOSg7IPDjKE3KANRoW/PHcM8gbGgGmKbpHWOjO+f+YLebfAhlhq/14b9GWjv8BjwwmkozxQk7AAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/6eeaf58bf36b3e31711bf31519f3b0cc/084e2/1320.png" title="try add an alert in onload attribute, nothing happens" alt="try add an alert in onload attribute, nothing happens" class="gatsby-resp-image-image" /> </span>

Why is that?

Open the dev tools and look at the code in the elements tab. You will see that the onload and onerror attributes have been stripped out, as well as all the other inline event handlers on image tags.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:692px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:12.266666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAYAAABYBvyLAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAgUlEQVQI1x3GORKDIABAUe9/tjSahYIxLuCSgBsCYpqfGav3ssZEpDRoMyO7HTkEtN0ox527Dogh8ug8rz7y7AOF8og+kree29tRtB61JKopUo8T2Wg8pehYdo/dfuSixq4O4xKNTej5pDEHrU2XtTlQ9rhefQ7UlJj9ydcl1pD4A+62lUVD0h/HAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/b06d72805b17cee6021d61cfd5a211f8/91e7e/1319.png" title="opening dev tools and looking at the element tab, we see onload and onerror attribute have been stripped out" alt="opening dev tools and looking at the element tab, we see onload and onerror attribute have been stripped out" class="gatsby-resp-image-image" /> </span>

If yu tried to add a style tag, it would still work however.

Why is that? That is because the style tag, if you look at it in the console is still being embedded.

To fix that, we need to pass `options` to DOMPurify. The default simply strip the nasty JavaScript stuff out of there but there are lots of options you can use.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1202px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:65.60000000000001%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0ElEQVQoz2WSu5IcMQhF5///yrETR04cbI1bbwQIkNTdMxNsadq7iRVIgqpbhwvcHo/Hvu+iujl3v9+3zW0+bN5DrWK9qYpqU2VRFmnvv5iVApDzbcwRU/LBRYCtQqoVY8QQvHMppxizDyllqKVgyQglppwKEsvj+bwd5ylmoqrWWa2ZqYiJNJF30tS6mvXexxh9PbuoNbElHnPGFL13oZSPFF1Kxbm8bc5tFznEnDL44De3EUspMOYcc75er0VuF8eWsWXpHbUvuKj1MfsY1rv1de/HsR/HEs85U84hhlTrveSEFbwDv06GkgumDEgCFaFWFoVaQwgF4Pl63fbjICIkJOZCBFgZK9YKta48kmhX6+8S9PJ/VfQm7zvUWkoBIo+YESllyjnGiEQhllyIWAHRx0DcuClU4Kbn47nIFbHAan8hwtYIANccoWJtTWRhTXU1Q80u232M5/9kYKa8yCmliojIrSlxU24GK7Yx5r5/dfs4iBkJWRo2Zmn89rq6QOQKf0SKKGvEC9uvOf0TjzlzKTHGjPgXIBNiTBhi8L4A/PxDP37zrw9WZi3LyNqVb/F5PsS0rbV92xIWWx6tWxM2bcfs53mMfR/HcRX8Lf4ExurYCecThMQAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/d361787b7da12fcc2294a4f0cf7a76c2/d43b4/1323.png" title="passing attribute as option to DOMPurify.sanitize function" alt="passing attribute as option to DOMPurify.sanitize function" class="gatsby-resp-image-image" /> </span>

The options Wes usually chooses are `FORBID_TAGS` and `FORBID_ATTR`.

Modify the code like so:

    input.addEventListener("input", () => {
      const clean = sanitize(input.value, {
        FORBID_ATTR: ["width", "height", "style"],
        FORBID_TAGS: ["style"],
      });

      output.innerHTML = clean.replace(/\n/g, "<br>");
    });

Now if you try to use the style tag, you will see that it has been completely removed.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1232px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:121.33333333333334%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAIAAAB1KUohAAAACXBIWXMAAAsTAAALEwEAmpwYAAADvUlEQVQ4y31Uv4tdRRi9f4gWwUJBECzsRBtFRBuxiDYhFhYSuxgDCmqiCNYqClYWAQWx0lKQYJEYceVtspt92ff27bu/Zu7MvfP7m5k7d+7IfbtsfmA8fEx3OIfznW8yQghjzHvvnLPWOucBrDHGe6fBFVQeom6N2aqmRcMabpBwWLqyM0SYrCGkrCqMMWMMIYybRkqptQYAZWBv3cxzvKja3VU9z/Huqt5d1bcOyhWRjYBMa80Yk1KKCVIICQAGYBxjiOna1s5vf1z/e3f/6p9bN2a3/7o5vzG7fe2fnQPMiYCMUloURdu2AKC1OYLWJsYhxHFrvr4+28Oqb10iNtXSI+GQcCWzq4pMypxzIaQxcEQzYJSa7AgNi8X+zs7u9u3l9mx75+YsJzxvTU5VyewiR1naYNwg3Ysxjin98NHZS6ef//z98xdfffrSK4+tlndKGfJ2Ii8LnKWHYYwppZ8vnzn37KnzZ9/88OUnPnnp0eX8VimHSZnbRf6/5CGl379894vXnvz+wutfn3nm1wvPrZd7hZiUCwarmt61fULaTEop9ild/erclbeeeu+Fxz9+8ZHv3ji1M9uqdcxblXcGc/Nw5TT2Kc1++fanz97+5vIHP376zpWLp/fm81rFvDXrFrCAbEpVyoZQzjljnDHGueg6JoXADSkQXVekaXnZtOuqKTA9KDFqCCItpixrMUVlVSEKdtPPqaHu+AUYQuCc31msEMJlUWCEiryoyoISTBqSsaYjh8hw/R++N0EopcoKGWt934/jGIcopFRaI4Qz7zwtEF6vMaZgvdPOg3+ATBAO1vbOhRCOGuG9bwiZAuOEles1bTpn/BjHGON9ZK0pxppSwZhUKqUUQlBK13U9kZVQVVlLLh8o2Ylyg5CglBEqWHd0vKEPlLYTWTIFBqyz413NaWI8Vl7s72OEFReKd24DxniRFxNZcwXGeAdxCGOc5l5lA6AIsQhxxpz3J7689xkMCTecUEG4plxXVNWtblXo9EBkL10kHV8uD2jHeCs3q4SjL0Aplak+4UYyaYUdBASqI9ED4h4LX3au1UPDZL1atYt9UhYGIMYYQj9VwdnJNnDtNAyhD6GPfT8O99s2RjPGy7opMekUV1Yar2xw/bBJu1OgbRhCCH3owxDi0X0cB6aUMVC2sMIqJ7qkpqJGGO/7kPV9T1ZYc0VbXRPdMTBMG2bicJy8Uoq1rei45FOzwHnr+nFqw5CpTnHUWWMFN1yAFGAlWG2HMJzYPjw8pIQwygBgExlM5yTkv8boLljcypM9AAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/f0bf5bed1a4216eb4da66dcf48ceb829/1628f/1324.png" title="style tag is completely removed" alt="style tag is completely removed" class="gatsby-resp-image-image" /> </span>

That the basics of security.

### <span class="grit"><a href="#https-origin" class="hash-anchor before"></a>HTTPS Origin</span>

The last thing we need to cover is that when you are sending data, make sure that you are sending it to an HTTPS origin.

The reason behind that is if you have an API, like [https://dogsapi.com](https://dogsapi.com/), and you are getting (which means pulling) data over an insecure origin (http), there could be other people on the WIFI network on in the government or anywhere along the line of you requesting that, that would be able to just look into that request, peer in and see what you are requesting.

When you are pushing data to an API using POST, then they would be able to see all the data you and sending an possibly modify it.

If you make it HTTPS, all the data coming to and from the API will be encrypted and you want to make sure that every API that you are using is encrypted.

That isn't normally and issue, most APIs are encrypted but it's just something to keep in mind.

That is the basic security things to think about!

Find an issue with this post? Think you could clarify, update or add something?

All my posts are available to edit on Github. Any fix, little or small, is appreciated!

[Edit on Github](https://github.com/wesbos/wesbos/tree/master/src/javascript/14-es-modules-and-structuring-larger-apps/83-security/83-security.mdx)

[**← Prev**](https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/82-using-open-source-npm-packages/)

Using Open-Source npm packages

[**Next →**](https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/)

Web Speech Colours Game

### <span class="highlight">Syntax Podcast</span>

Hold on — I'm grabbin' the last one.
