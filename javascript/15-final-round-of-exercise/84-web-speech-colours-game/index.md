






(https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes)
    1.  [Data Attributes](https://wesbos.com/javascript/04-the-dom/built-in-and-custom-data-attributes/#data-attributes)
-   [Creating HTML<span class="videoNumber">Part 25</span>](https://wesbos.com/javascript/04-the-dom/creating-html)
    1.  [append method](https://wesbos.com/javascript/04-the-dom/creating-html/#append-method)
    2.  [insertAdjacentElement method](https://wesbos.com/javascript/04-the-dom/creating-html/#insertadjacentelement-method)
    3.  [Generating An Unordered List](https://wesbos.com/javascript/04-the-dom/creating-html/#generating-an-unordered-list)
-   [HTML from Strings and XSS<span class="videoNumber">Part 26</span>](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss)
    1.  [document.createRange() and document.createFragment()](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#documentcreaterange-and-documentcreatefragment)
    2.  [Security and Santization](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#security-and-santization)
    3.  [XSS (Cross Site Scripting)](https://wesbos.com/javascript/04-the-dom/html-from-strings-and-xss/#xss-cross-site-scripting)
-   [Traversing and Removing Nodes<span class="videoNumber">Part 27</span>](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes)
    1.  [The difference between an Node and an Element](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#the-difference-between-an-node-and-an-element)
    2.  [Properties to work with Nodes and Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#properties-to-work-with-nodes-and-elements)
    3.  [Removing Elements](https://wesbos.com/javascript/04-the-dom/traversing-and-removing-nodes/#removing-elements)
-   [Cardio<span class="videoNumber">Part 28</span>](https://wesbos.com/javascript/04-the-dom/cardio)
    1.  [closest method](https://wesbos.com/javascript/04-the-dom/cardio/#closest-method)




##### <span class="grit">Module 13 - Ajax and Fetching Data</span>

-   [AJAX and APIs<span class="videoNumber">Part 74</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis)
    1.  [What is an API?](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#what-is-an-api)
    2.  [JSON](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#json)
    3.  [AJAX](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#ajax)
    4.  [Public API list](https://wesbos.com/javascript/13-ajax-and-fetching-data/74-ajax-and-apis/#public-api-list)
-   [CORS and Recipes<span class="videoNumber">Part 75</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes)
    1.  [Query Parameters](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#query-parameters)
    2.  [CORS](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors)
        -   [What is CORS?](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#what-is-cors)
        -   [CORS policy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#cors-policy)
    3.  [Babel](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#babel)
    4.  [Browserlist](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#browserlist)
    5.  [Proxy](https://wesbos.com/javascript/13-ajax-and-fetching-data/75-cors-and-recipes/#proxy)
-   [Dad Jokes<span class="videoNumber">Part 76</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes)
    1.  [Headers](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#headers)
    2.  [Getting a Random Index](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#getting-a-random-index)
    3.  [Loading State & CSS Loader](https://wesbos.com/javascript/13-ajax-and-fetching-data/76-dad-jokes/#loading-state--css-loader)
-   [Currency Converter<span class="videoNumber">Part 77</span>](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter)
    1.  [Caching the Rates](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#caching-the-rates)
    2.  [Converting](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#converting)
    3.  [Hooking Up The UI](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#hooking-up-the-ui)
        -   [Input Event on a Form](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#input-event-on-a-form)
        -   [Wiring up Handlers](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#wiring-up-handlers)
        -   [Formatting Currency using Number Format API](https://wesbos.com/javascript/13-ajax-and-fetching-data/77-currency-converter/#formatting-currency-using-number-format-api)

##### <span class="grit">Module 14 - ES Modules and Structuring Larger Apps</span>
##### <span class="grit">Module 15 - Final Round of Exercises</span>

-   <a href="https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game" class="currentModule currentPage currentSection">Web Speech Colours Game<span class="videoNumber">Part 84</span></a>
    1.  <a href="https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/#web-speech" class="currentModule currentPage">Web Speech</a>
    2.  <a href="https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/#colour-layout" class="currentModule currentPage">Colour Layout</a>
        -   <a href="https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/#combining-speech-and-words" class="currentModule currentPage">Combining Speech and Words</a>
-   <a href="https://wesbos.com/javascript/15-final-round-of-exercise/85-audio-visualization" class="currentModule">Audio Visualization<span class="videoNumber">Part 85</span></a>
    1.  <a href="https://wesbos.com/javascript/15-final-round-of-exercise/85-audio-visualization/#audio" class="currentModule">Audio</a>
    2.  <a href="https://wesbos.com/javascript/15-final-round-of-exercise/85-audio-visualization/#time-data-visualization" class="currentModule">Time Data Visualization</a>
        -   <a href="https://wesbos.com/javascript/15-final-round-of-exercise/85-audio-visualization/#frequency-visualization" class="currentModule">Frequency Visualization</a>

<span class="grit">Web Speech Colours Game</span>
=================================================


JavaScript, Web SpeechEdit Post

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:51.2%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAACNElEQVQozy2N3UtTYQCHz7/S39Bt0JVI0J0SRFZeSFc5UyttLpfFiiAxjCFpBGVZYYIT07mNlk5rdBNCFH7MuXPOu/O+73nP+30+3DLD8Ln6XTw/HkPxod2d76A8jj9eZmsZsrP9cnerdwN0Zhfalyd6M1OJ7NTb1HRmYHI+OZxJ3V34EMsW+soqual7jGD7DH2TLn8aG8ynh8uzD77lUp8XH79On7565VRbe2v8Ttvg6IXr9y5dS3e1vB+IzY0+LU4OP5ofO7c2e9awf13MT66vvMuWt4qb25mfuxvPfmz2FxfPz0x2jEx3dU+kOkZedEw87yzdepKNzb26sTTTtjreOp+KlbqNqNnCgocySPyJho6a8b/NeD2Kg0YCqSQ2kxDcF1bisNbX2O9hsg8d3IbBzb3D/spR3D7qMiyzgGGhbq9g90vVzJugAMwVx86b5rINc3vmoo1yFWsJequetw6sHEFFn33VXkm4JYMQXa9zFyuPBi4JMVZ1pCzHd5APbFkHGgNGABVEa+YrEQl5UIe8sudZtjCCINz6bVV2LEIQpURKJiXXvmxo0WBuU9ADJXxBfSGpwymWnCnGPASJlNqIoshxHIQQRth1XfofLkTIWQBhyI43oZS4Ya3q16qa04hSz7JMLrgRhiEAwHEcCCFCiBDP8zzOechZiGAAnZBSj1LGKDB9s6qsfQ2dY0lr/6TsOMdPjE/KQohQiNDFilJOqYslsKRZ1VZN+brBGMMYK6X+ASDW5SPJoLn8AAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/5e946887848fac1bcaa4fcc86f78a667/aa440/1372.png" title="1372" alt="1372" class="gatsby-resp-image-image" /> </span>

In this exercise we will be using the Speech Recognition API that is currently only available in the Chrome broswer to practice our JavaScript skills by building a little game.

The way it will work is when you say a colour, the background colour of the website should change to reflect that.

Let's start by opening chrome and navigating to `chrome://flags` in the browser. On this page, we need to make sure that "Experimental Web Platform features" are turned on.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:61.6%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABNklEQVQoz42R3U7DMAyF+/4vxTW3XDEQG13WJG23tMny6zgO6ipNAwTbkS8cyZ98jtOw3etm275v25aJcdLz2clRMT4wPuyY+Gi77Z5/MrHn/UGOTAy31dRasZScERCpVqq1EA3H02zOkDECIpZaa0aabcqF1pm1Glqei26boeumXrp5no5HpaZJKWOMD+E6s6qpv1So+pAm47WNCRAAYgjOeSz0AFyo7wcpe61NWgQF8+YQnl60i0sE+gdGpD07MMamefbeeR9qpV2fnt9sSPdgIpJScs61Mc57a21BVBbbIQLes01EQsrTSfkLaa1NKRFRxvI98h9wx7kQwlobY1z+qhTIxUV8CB7HUWsNFy0XA0gZfcL7115sCyml9N7HGAEgZ8hYYnpss1JKa32FV9s+5h+hvwCgurrLxSBNnAAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/ae6408b7d9f824ccf70ba6065c7e85fc/aa440/1373.png" title="1373" alt="1373" class="gatsby-resp-image-image" /> </span>

We also need to get a server going.

If you open up the `84 - Web Speech Colour Game` folder within the `exercises` directory, lets take a look at what we are working with.

Wes has given us `colors.js` which gives us an object containing every color that is available in CSS, and it's corresponding hex code.

Within the file there is also a function called `isDark` which Wes grabbed from StackOverflow which takes in a color name and figures out if it is a dark or light color.

Then there is `style.css` which contains a few styles and animations, like the word popping up and getting crossed off when you say it.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1314px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:41.6%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+AGalUSX4JTloeS4nnTMv8CU8rSh0bBW1vhTU6Q3Z5FDYoc2IE7h+e7J3x9WUsOWoeeOyAOvGevjl/5B6iQDsjGbl3Mre0sSxsLOpn6WMLzeJEA+CCjODD4KZSnHi4BDp5guMSW9lEZ6KNmSxZz+6W3m/VMa5VsPJYNQAmSonoT46okRBxKq+xLi63b6y4ZqO4qGY47Sv7NvH8/C87tO94zHc6Bfx6y7H4FeL7lWchzqhLCqZPC2cAOdbetuvg+CihPHPye7i2OvpyNXWvNPVudPTttTPtNzTu+jozFlqW0CIRUimQ0eoLFG2hjOpuxSlrSWAxQCPd4WQ70KP8i+E6yq66oD77NPp4cDp4sLo4sfn5Mvp6tDi0bWGUi99VRp9YyV2j1Z3l3x/mZiHs4GIrHgAkJ+ek7o8ksAtjrwjqtJ7xebVwObHxuzRzd/fx9fbyN/ky7q50I+R1Jag23d24lQ94FxB3lY524t10p98AOLf3ufPxd/DueDCt+Xf2trr7tPi5dzp7Ojs7+Lk5+Lj5+ju7ubw7uH08uTZzfGmi++rkvWulvDIyuXG0gDj4+Tk7PLK1NzFz9fZ3+fs6uva2NfX1tXq6unn5+fV1dXV1NTt6+vn5OTU19nW4+bS3eHh7fDr8fHU2demDT82D44n3QAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/eca6d3ad474283d254cee46a3c19f497/252a4/1374.png" title="1374" alt="1374" class="gatsby-resp-image-image" /> </span>

If look at the `package.json`, you will see we have `parcel-bundler` and `browserslist`, both of which we have used before.

Open up the terminal and navigate to the exercises folder and type `npm install` and that will install the dev dependencies for us.

After that is finished installing, simply type `npm start` and open up the server in a browser to see what we are starting with.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:35.2%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAiElEQVQY02MoWnkpe+HpnMVnC1dcKlp5qXDFxfxlF/KXngORIMZ5KIJwkVDu4jMMDDHrGGLXM8SsBzGgaD2D3xQG736GoDkMflMZfCaAuBBxZBS7noE5YwsaYsnYwpy2kTllLXPaBub0TSAybQOmMuaMLQwMaZuxo/QtIJQGR9jU4NRMDBowzQAcsKfY+Vuq6AAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/95eeabe192895ed2fba0764b2913c8e1/aa440/1375.png" title="1375" alt="1375" class="gatsby-resp-image-image" /> </span>

Let's start by getting the web speech part working and then later we will connect the colours.

<span class="grit"><a href="#web-speech" class="hash-anchor before"></a>Web Speech</span>
-----------------------------------------------------------------------------------------

We need to check if there is something called `window.SpeechRecognition`. However if you try to reference that in the console, you will get undefined because it is actually `window.webkitSpeechRecognition`.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1168px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:23.466666666666665%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAzklEQVQY04WP64qDMBCFff/3W5sY493UNFpEzMUUPUvmx0KhZQcOkwM5M/NlxhjIqkbTdhjGEaWs6P2T59ST74cBbdshhIBU13V9VbauKwWmSUPd75iXBT4EWGuxW4tt23AcB5xzFPivaKBSCsuyQGuN5OPrRdekQak75xFjpEXee9J5nh+VTfrxhzwqhZwxQmecoxACpZRgvCD0umnQdh26vn+79g35+fQohMSNcQryQqAQJSkFRSlh5hm73Wlh8lVd42EM/U0+UR0xEvIvSiB696ic6N8AAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/2ea20d08b68c5ae4702b4cc67734bdaa/8cdda/1376.png" title="1376" alt="1376" class="gatsby-resp-image-image" /> </span>

Add the following to `speech.js`.

    // speech.js
    function start() {
      // see if their browser supports this
    }

    start();

That is what is referred to as **vendor prefix** (adding `webkit`). That means that the API is not completely done, so they will vendor prefix it by adding webkit infront of it.

Chrome engine used to be called WebKit, it is now called blink.

At the top of our JavaScript file, let's normalize that like so:

    // speech.js
    window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition.

Now in our chrome tools we can access it like so:

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1092px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:17.333333333333336%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAYAAACTWi8uAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVQI1yWNXU/CMABF9/9/lB+I0Rc1hKBgyMbWtR12sglby1rhmNaHk5zk5t6bnZ2lalpmS8HjSnK/KHhaa+armufNnvm7pjY/XC+/TNOE954QQiJ6xJ4DJ+sTGdcLypy4fcuZLXLuXrfcRF4+08HDUrBTLSH8l30IWOdwzqWDyXuGYUh53MqijKPn2B8p8i2NVoiqREpBVRZ0h28qIVC6oe97Dl1HsSuppUQpzZcxfKw3mLZltJY/CrXgH3hBs9kAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/8005ebe75570446e3c4c2eb3722541be/2cffa/1377.png" title="1377" alt="1377" class="gatsby-resp-image-image" /> </span>

Now within `start` let's check for the existance of a property called `SpeechRecognition` that is in the window.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:846px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:17.6%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuElEQVQY063M0U6DQBSEYd7/uUxTY21Fk1JoK9uVsthCWWAByy75jXBl4qUn+TKTuThen+fo9yO1lDTJBzrcUe0jWqVo5GliVEpzTqZ+b2p63WNUja4qsizjJOWk6zo8hi/085Jq84TebinffPLHJfVhz2XxQPmypj0n6DCgfPUZ7Z32YjBCT0/CKCLYhazWG4rihpd+GkTaIlTHf5x3zQ1CFMRxwegszlrcMMz5F+dm1mGt/eVn/wbdXzCMvdjuIAAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/0c0b6e37f493c5c9c9550d484d892270/5b481/1378.png" title="1378" alt="1378" class="gatsby-resp-image-image" /> </span>

    // speech.js
    function start() {
      // see if their browser supports this
      if (!("SpeechRecognition" in window)) {
        console.log("Sorry your browser does not support speech reco.");
        return;
      }

      console.log("Starting...");
    }

    start();

If the API does exist in the user's browser, let's create a new speech recognition instance.

    const recognition = new SpeechRecognition();

Next we need to set a few options.

One of those options gives us the ability to specify whether we want to listen continuously for speech recognition, or stop after the speech has been recognized (similar to how Siri stops listening after completing actions).

Add the following code to set it to continousy listen👇

    const recognition = new SpeechRecognition();
    recognition.continuous = true;

Let's also set `recognition.interimResults = true`, which will give us the results as we are speaking instead of waiting until we are done.

We also need to hook up an event listener.

This is a little bit different than most event listeners because normally you would add `.addEventListener`. but if you try to log the `recognition` variable and look at the prototype, you will see there is no method like `addEventListener`.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:792px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:87.46666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACHklEQVQ4y4XS2U7jMBQGYN7/tUYMaEZCkIZ0IZA0i/ftOLaTtFlGSdFcFCp+WZZvPvn4l+/GaVSV4jnHKRGF5BUPwfM13vlxHIfbuZvnWVeG54JnQmTKMGjblmAMxvR9P6+ZpvnbLJh/iDKqi+dS1jL0njAslBiGYf4pCzYYyIHSlOE9KaOKF0KWStcmWB/CiQtfI9t15++x5Q3PBEsZ2bMqQizlIpOyUIooH/qi0HFCQ3v+Ov8dQqgLXatbx73jrnf9OI4uuNfX+PHxIYqiTfTy8PvXdru9v79/enp6T9Moina73YKnaRrPIyAQuSR7SvdU5srqhnMupfTer3vo2g4AvPen0ymEcOlywfM8r5JVL3X5XC1YNo1rAMAYY60dx/FGYeszLLMoIVWMfOulkefxzAXvuu6ntlfstacHVsdIVVoUclm16PveGjsMAwBMa27d3JAdA2xFLlGM0QaLQnRdJ7ho25ZSesFX839iJ315KPPNsaEu+3vM/xxFJlnK6Z4566SUIQSllDHmG2ww0JShBMujom/s0jxQy1IObCnZGNO13f+eP/HlIfKoyudafEh5VDihslA4IboyOCbkQJ1zFsBobYwJIVxjQFBGdZ2geoPInpI3ghIsSuEaZ6xxzjVNY61dP9l0PTYQSw+UHhh753hHeMZZyjXSzjoAsNY2TeOdu8aXs64N3hKcELwldYwvN2tsVmy01gDgvuB/RYbEKnHs+bwAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/421696dad638dc9b6875c94587b2a9c9/9a86a/1379.png" title="1379" alt="1379" class="gatsby-resp-image-image" /> </span>

To listen for a result, we will use `onresult` like so 👇

    recognition.onresult = handleResult;

Next we need to start it.

    recognition.start();

Go ahead and create another file called `handlers.js`.

Inside of that, we will have a function `handleResult` which will just log the event for now. Export that function.

    // handlers.js
    export function handleResult(event) {
      console.log(event);
    }

Now within `speech.js` we will import it.

    // speech.js
    import handleResult from "./handlers";

This time we do not have to include the `.js` extension when importing from `handlers.js` because we are using Parcel.

When the page refreshes after adding the import statement, you may be prompted to accept permissions to the microphone.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:752px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:69.86666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACXUlEQVQoz3WSzWsTQRiHx4SI14qCtngRDyr14K1/hQevgkUxbSxiUxEpSMWDnjyIR71oFJGWfGytWIvooSkiSA9FmibZbZr93tnNbDfZmSa72d2RTLTWUn88hxmYZ96ZeQeUquIe6v+jvCmXBanEixu8WOJ7i9crddBo2H1Qw4YQqXpDMxg6g411iDbKQlWoyypUNBPqhgXNVtMFgmb3qaoIoibBBLO4LsaYuC52nKaL8erq6nqpZEBoWo219cqPnxW92QED6YWj6YXjdz4kxnNvV6rt1rYOTcuyEEKGYTiOQ/8kiiJK6Q4hI48+H5ngjk0tAJAsgGQhPs6BK7OZIu+5SJRkCE3TNGVZQQh5nrfDEoYR2yM8f38RjGZjYxyIp7h4ijs8MQ9G514t880WESVJVVVFUSRJ0jRNlpVarSaKYn8jSqPhmUVwPZe4Od+TY7/l2ZdFwQvo1lZdEDZFURQEvlKpyLLcYrFtu91u75dZ5fdgdO51kae0C03LYOe27W3DMGzbdhyHaf2rh8Mznw6QM8VqBzdlRUPIJoQYhqGzaJoGIXQcJwi6Xd+/8GC/3LvzmxWehh7Gru95QRC4rF0uC8EtQnAYhVHYPUi+Ovvue41SKqEO6YS7DQrY8MlHcvkZuvTUyizjkcdL4NoeOcEqZ5Z5GgUqch3c9nzf87uqprt4h0b+0lrr+Rf7xdftb2X34sN/K/fefJwbuJUfSmdPTeWG0rmTkz0G07nByeyJ29kz93Jnp/PnpvOn7+YTqXyMKX/leIo7NMb1/szYLnumyQK4wUgW+mYsxf0Cr4BW/lsFHxQAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/922f4f73600e06f60233a7fb6cdd4f12/442cb/1380.png" title="1380" alt="1380" class="gatsby-resp-image-image" /> </span>

We want to allow access to the microphone so that the SpeechRecognition API picks up our voice. Go ahead and allow it.

Once you do that, it should start listening to your voice and you should see events streaming in the console as you speak.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:53.06666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB6ElEQVQoz22Qy28TMRCHfecvLOLRdkmiIsR/wqFcqjRU0MAFIdpQuCAuCEql7h6QELSpKqB57cPrsdevtXc3JGAHceLTyBpp9NM3Y/T5cvL1R/zle3J6NorOx+H5OBrOwos4uphFw2nkmjgcTlYjN/V1ejYKv10hFLxEwQFqDVBngNqHqHOEbuyjtS669RTd3EfXH6G1XbTxHLVfofbAva1DV8HBtXtHaKsfBb3jO3snt7sfN3ufgr2T1s67jQcv2jtv17fftB6+DrYHrd33nSfhZu94vfuh8/j0bj/a6kf3n4VIk7gq8EIXhjPLqcxjwRgjwCkUAIqBhtQWeFnJX5otFFvWelnJhWYCz9DPq9FoMh1PpkmaEUpzQnNQwHiWE0IFME4IxEma4hwTyIESYHGaxUkqpELgIYRQypRS1hprm7quy7I0pqqq2lqrlJJSKocWQmCMAWA+nyNCCADkec4Y01obR1NV1b+wMUZ6XFS7cJZlANA0DUo8cRxjjDkvhBBSWqVK32utSykl8VAPYyxN0yzDdV0jxhjnHAA458aY2jFvmrmT1k3TuBP8OsZ6lFLYr/nXnKZpkiTe7FiZi+L/ZkqpN2fOnGUZxjhJkjzPhRDGnVpbW7lcaa2tjDH+ltWHOZjnj/k33aoutM3inmMAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/3cbddd72f960d7186ceabbe0b16714f4/aa440/1381.png" title="1381" alt="1381" class="gatsby-resp-image-image" /> </span>

If you open up one of the `SpeechRecognitionEvents` that have been logged in the console, you will see it is very similar to an event object.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:35.46666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9klEQVQY023O3U7DMAwF4L7/A6JxgaZu2UraxLEdx/lpWlAHAoH2XVm2j3QGZr4fJmut94CcUsqamySJMeZcVTXGCABEFEJgZmutMYaIhlaav/j7m3WO66H13vd9//hrf/i3HPra3ein6/uyLOC/EVHOOT3knEspra211lJaLutveNs2sGBvszFmHEdjzPl8Pp1OX/M8z845AM8khBSQnU8/FYbeOtwCWVTWtq7btj2t/dRQc1tG728ThSAizExEiOics9YiIhFpEibigxLFEAIil9KO8P1lur7Oy8xJRURUlR6vAICIIpJVaynHTZJIkZSYudb2CXeUj+vzRhHUAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/74a6ed0ddff96fd08811e417dd544910/aa440/1382.png" title="1382" alt="1382" class="gatsby-resp-image-image" /> </span>

However there is a `results` property, which contains a few items that the speech recognition thinks you said. In our case, we will be taking both of the results.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:25.866666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAq0lEQVQY042OyQ6DMAxE+f9/7AFKs5glq2MTAmkpRb300Cd7ZFuyZppoENpRSAWgAQAGcM6VUuofNGUt4iYenXY+xhhzzrXW/aJeWq9rPWvbjue1lPEx6R66uxBCwBtrLaaUidYQsvc5hBUxx898qHOZ+XBWre5bqTQoKY0xzPw79un/3fZm3/ZZmEFN4+yJifloRAwhLESLtYsxS0rOe8SkFStJoGie6BX7CUMYIMdmjXMJAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/49b4f2d4dbadb419b2d6159636a1094a/aa440/1383.png" title="1383" alt="1383" class="gatsby-resp-image-image" /> </span>

The speech recognizer will continue giving us words as it tries to figure out what you said. Even after you stop talking, it keeps streaming the results in until it is confident in the result.

Within our `handlers.js` file, let's create another function `logWords` that takes in the results, and logs them (for now).

We will call this new function from our `handleResult` method.

    // handlers.js
    function logWords(results) {
      console.log(results);
    }

    export function handleResult(event) {
      logWords(event.results);
    }

Sometimes the SpeechRecognition event will return a list, from which we want to grab the last one.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:27.46666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAtElEQVQY04XOy07DMBAF0Pz/j5UFUiVQVUFVSKLgZDxu/R6PnWLTVrAtZ38fHRFNn9Myg1JKnU7GmrM+z2JGRAAwdwCgtUZE67wxThvvA61r6Wqty7D0xwERpZTW2sTsnPPexxhDCMxMlEpZmVNKhfPa/nStNYdOfimpbCQOiUvJ7aF69xsmT+Ig5hGet+Pm6WPoMYZ8+b60+rik3W5HQx7i2E+vL/v3t+NudxBiyfmf/Wv4B509Ht4vsVxWAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/8a4fed97636a615d46a3fd4a77ac9423/aa440/1385.png" title="1385" alt="1385" class="gatsby-resp-image-image" /> </span>

Within the last item there is a `SpeechRecognitionAlternative`, which we can use to grab the transcript. Wes has only ever run into there being one `SpeechRecognitionAlternative` item.

Let's log that in our `logWords` function by modifying it like so:

    // handlers.js
    function logWords(results) {
      console.log(results[results.length - 1][0].transcript);
    }

Now if you refresh the page and try to say something like "I love Pizza", you will see that logged in the console.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:668px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:88.26666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABn0lEQVQ4y52S2W6jMBRA+f//Gk2mLSUBkkmahiVhDYtXjA02HjmofagaGs2RHyxZ1+duVtd1CCMIIaUUAIAQopSyD7pFLK11FEWv67Xr+acgDMLw1+/V4e3IOe86phexlFLUyHELoFKKC1HVTV6Wfd8zxpRS8j7GXBQlRCiKY8/f+tvdOI76MaxpmiilnHOEcJ4XVVXLUarHMOa6aRA2kacgiOJ4fpgewAS3LWCMZXkRnc8tAKOUWutHgxFCGGNoQBAiQkiaZYyxaZqWU7ilXTfF9brx/BfbDsKoqqrV0zOE8Ee/aRhjTAjR9/0wDEIIKSW/QQjhnM/+uw1LsxwAcDy+r/48rV0vTTPbcd5Pgf3qBGE4+78flZRyGIbZIKUc5SiE4JwPH/ywJGZD49h2nOcXuyjLjettPG/jeq7n33N+mk32/W1J5oIBgIRQQiilVKlJSnXvGHOe5wDAOI63u93+cGia5vB2TNPs735/viRLNWutMcas75u2vSRJUZZ1XV+SpCyvlyStm1ZrLeX3C2vVePjy95f70pwxU/p/+QcQuw/uPJ+W5AAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/1d65511b9197aee68a54055cb18261f7/74866/1386.png" title="1386" alt="1386" class="gatsby-resp-image-image" /> </span>

In the code above, we are accessing the deeply nested property on the `results` object.

Now that we have the speech working, let's get the color layout working.

<span class="grit"><a href="#colour-layout" class="hash-anchor before"></a>Colour Layout</span>
-----------------------------------------------------------------------------------------------

We want to loop over each of the colours in `colors.js` and display it as a span on our page.

One thing you might have noticed is Wes final example is that the colors are sorted by the length of the name.

Within that file, let's add the following code and export it.

    // colors.js
    export const colorsByLength = Object.keys(colors);

    console.log(colorsByLength);

Let's import that function into `speech.js` like so:

    //speech.js
    import { handleResult } from "./handlers";
    import { colorsByLength } from "./colors";

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:27.999999999999996%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVQY0y2O23KDIBRF/f8Pa5+SqBVQCKhJbyKcw1GjmFs7Tvu49l6zZyfk3OL6NYTFuRhC9D4CRO83RFys3ap/hKXrVsS+Nl9ag7WJTQ8+z4amwVJA8Uan1ucZygpYgVUJnAVZ+TwLSpHR9vVlOJ8u59P8+fl8PBKfpj7PqW1JSqzKoW1CKeio/mzgDAUPSoHgkGdhy+XQNMD5bG3isywoOX68Y1FQbeioUIjBmKAkKYmchaqkug6ywlLgtmiQMWDFgpjAfuf2O9IaGPPpgdoGimK7zZlLD6E2ILg77FFrzwrSmoymUoxNfb9ek299nBEjUUSIAddpjBTWaZr7fr1cItE6jYtzyzjebrfH/f7zfM7z3HcdIf4CGbdEMhiVd5YAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/f212d9cc86d402501c430010991fba12/aa440/1387.png" title="1387" alt="1387" class="gatsby-resp-image-image" /> </span>

If you look at the console when the page refreshes you will see that it gives us an array of all the colors.

Add the following function, which will sort the colors array based on their length.

    export const colorsByLength = Object.keys(colors).sort((a, b) => {
      return a.length - b.length;
    });

    console.log(colorsByLength);

*Sorting Refresher*

The `sort()` method works like so:

-   If you return a positive number, it will put the item in front.
-   If you return a negative number it will put it behind.
-   If you return 0 it will not move that item.

When the page refreshes, you will see that the colors are now sorted by length.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:22.933333333333334%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAIAAADKYVtkAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA4klEQVQY0z2N226DMBAF+f8va5PeUEqCvazXIeFSAvau7RQq8VChqH0ZnZFGOpmbnEy8xDB7P4vMzEuQvxEeXIJ8e/evvu/7uh7HMRuKwhtiACFipYQMg2aABz1o1poR3bFgrPihoL1WwVLmj0XqO1alWMtKedCBSCoI1m6dQTEoZATRq3I7qIAriPX5J8ZseH5iIgZ9e32JbXvb74RIAKb8I3Xd9P62pWSG/S5cLy7PvVLRkis+F+HMHQ7xeklt48tTGgbBSgzev3pBTG27fRqMTcNaydneu06wSk0zp7Su6y/epA4LzTHc5gAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/1533285288eadb0d9c88c383a16a6770/aa440/1388.png" title="1388" alt="1388" class="gatsby-resp-image-image" /> </span>

Next, we will write a function to display the colors within `speech.js`.

    // speech.js
    import { handleResult } from "./handlers";
    import { colorsByLength } from "./colors";

    function displayColors(colors) {
      return colors.map((color) => `<span class="color">${color}</span>`);
    }

At the very bottom of the file, let's call that right away.

    // speech.js
    start();
    displayColors();

Within `displayColors`, let's map through each color and return a span with the class of color and the colors name.

    // speech.js
    function displayColors(colors) {
      return colors.map((color) => `<span class="color">${color}</span>`);
    }

Let's take a look at the HTML we are working with.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:90.13333333333333%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACgElEQVQ4y4WT+3KiMBSHfYRulatWi0otYIIIiMolgYBEVEB0t91tO9PZ93+IHax7bbed+f5LvpyTk18a+yrH+3KeFEtazePdPCnd7Jjdf0+Oj+u757D8RqpHlN+H5UO0f7DIzoy2ZrS143xJq4YI3Z4RdEwiLbIrJ+vapG8FokE4iHkj+qR6F4r7SXEvTlxq/gvNccBC3LhUFtx4KQc7NX9S00InxExxb54w9TLidPwXEP2ChajRVBYC9K6suO2k19Pl0PHbTiJOIwYgVq93vMNZlhZrCRe8EV+o6FJFrVNZBgQfyC11IQCvYxIl+9rHueYugefJXizhleSv+EnEwHPPLHhThh4PfJkcbujdjO5tWtqbLxopYFJBUo1wPiBVd55xp1vUB03wb5mHHgf8Ybjvh6UeuHJIlSxTMyondOy7VuRfe8kgWqnb9ShNR6u0bUXM2GeBf5a7dnK7fYabzxBFEi5kWo7WpRQXsr8CYTogxfhwvN1Wyq66DnLeXAtWTS2Lut9frGX6BNKy4+yEWSHauXCCnxW8nYvOT2aFOMvbTvFCo6Ute2bYc1ZdN2MhamkuA7ym5rXGHgt8DgYcDFjwNg1GW3YN1J0l6vZBi4/9xUZ2t2pQDFHZdlZN1WUgYnVc8/qpGG15NUUc8AZhdRNQAwUKpgrdDsl64O2G0aFtxS3Nqyf0HxnzMOgH+SA+jLxIcZFEUrDfqJvNiG5u0K4f7ofxoW3G/8TmLIuTsDNLRXvF6VjQETfBohUKJuYNxE9CYUoEk3CvOj/JBurZ8ZAcrhzKjP061QAx46AG1CF9gYXB27JohB2HCiZ5ncF3s30aWM9O6spzyn70Gf6UfwBN8dOVh4UZBwAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/e0350b93b96f25d5a172e7b785f2aca1/aa440/1389.png" title="1389" alt="1389" class="gatsby-resp-image-image" /> </span>

As you can see, in our `index.html`, we have a div with the class of colors. We will select that on page load.

    // speech.js
    import { handleResult } from "./handlers";
    import { colorsByLength } from "./colors";

    const colorsEl = document.querySelectors(".colors");

Next we will replace where we call `displayColors` and instead set the value of `colorsEl.innerHTML` to the value returned from `displayColors()`

    // speech.js
    import { handleResult } from "./handlers";
    import { colorsByLength } from "./colors";

    const colorsEl = document.querySelectors(".colors");

    function displayColors(colors) {
      return colors.map((color) => `<span class="color">${color}</span>`);
    }

    window.SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;

    function start() {
      // see if their browser supports this
      if (!("SpeechRecognition" in window)) {
        console.log("Sorry your browser does not support speech reco.");
        return;
      }

      // it does work
      console.log("Starting...");

      // make a new speech reco
      const recognition = new SpeechRecognition();
      recognition.continuous = true;
      recognition.interimResults = true;
      recognition.onresult = handleResult;
      recognition.start();
    }

    start();
    colorsEl.innerHTML = displayColors();

When the page refreshes, you will notice that we get the following error:

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:12.533333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAADCAIAAAAcOLh5AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAj0lEQVQI12XH2wqCMAAAUP//j7q8rnoQCnVmc3NRrOaurFql2RYRBBGcl5P4ovBZdivLS7V2VWUh1Dk81cQh7DC15ebc0E6J/tddtJI2iR+N/XRyBYDPAFvMOQA9RgNGT4z8tnGktgR1/BCtjkZ9BS17yZN9mtLVcpdnnrGuPT6kiEYHLYNRg5If7/6JRr0AdWyi4jrnRU0AAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/bf3962942a0deb071e948bfd675300fd/aa440/1390.png" title="1390" alt="1390" class="gatsby-resp-image-image" /> </span>

That issue is happening because we did not pass the list of colors as an argument. Let's fix that.

    // speech.js
    colorsEl.innerHTML = displayColors(colorsByLength);

Now, when the page refreshes we just see undefined and there is nothing in the console. What is going on?

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:45.06666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABXElEQVQoz6WLXUvCYBiGn+xXimkelP2M6Mx10H+oSEzbnNAHdBJFIEFtguB0U+dyX27Oubn39d0mGRMk6bBuroPn/njg7FE8fRCOq+8nDEfdtRPu2z/HbYu6fqbKT0W6QdGNIv2W2OorVXkp1nmAbBX2ypCnIc/A/s1vclXIlCB9DulLyJaTZeYqSTIlyFUgdUjv5i5SB/ROgd1QW7OxR/UttmyBBYbXGN5gOLXGa2zTYDiNbepsU2c4leX1Gq+tc3090NeVQX8kd43XIHAnrmXEeO5NTMdUw8Afa6qla2HgO6aKfRd5U1sfRXjuOdbEUF3bXBI0NTU0c6A/kLuipCgjWfkcj23DcgYjWxqavb7SEXvCQBV6w1an35ZkUVZbXVmQhpIktYWuKPVh6voI4cWCEBLG8TKKomUcL+N4kYj4iHgB8RCZBXiOQx8RtAgxQhgnNXyt/i74x+/qGwe9n63OpehoAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/d87c41a913ad9e03a136e53de535a82e/aa440/1391.png" title="1391" alt="1391" class="gatsby-resp-image-image" /> </span>

If you look at our `speech.js` file, you will see that we forgot to return the colors map in our `displayColors` function. Fix that by adding the return keyword before the map.

    // speech.js
    function displayColors(colors) {
      return colors.map((color) => `<span class="color">${color}</span>`);
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:40.53333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA80lEQVQY02WPTU4DMQyFLcU0pwPNgnVRx5lpWUGEuEYXIDZsYfLXDHAP2gFuhOykpSrS09MX20+O4T793A5b66a7+G39ZP0Xu9sKT9btrN+JTye6efkEmG/gaoR5FsgCGZoHuFjD5TM0T3C+huax1k+krz9mqze9HPXqSH3SxrH3adZF3UcuLsc6VuEdsM9IQVHA1rPIn4mjCUiBgQRaJ93iAdsBTfoLc57igZWJNVyhstQjklcdh0deYhIPlR57KvBfypQdUXUbCVPYf5Ib6vARnpbRo648eTNKOOOCD+CryuW0VzsIuHokV5yMOVy8Ypd+AU6GudkLUl4EAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/e9dc8a307a8dc19ad68617c8bd1ac877/aa440/1392.png" title="1392" alt="1392" class="gatsby-resp-image-image" /> </span>

As you can see, now it works! That gives us a list of all the colors.

To get rid of the commas we can call `.join('');` like so:

    // speech.js
    function displayColors(colors) {
      return colors.map((color) => `<span class="color">${color}</span>`).join("");
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1208px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:72.26666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhUlEQVQoz3WT626DMAyFkezHnFZyIbTvNE1rQ0gI0MuecDt2uv2YJkXIin3szwfo6Hj//zz+nHt7nj7JlQ7RsNKwUdgQ+MrDyvocKuGpZyNfCTeV9fRTR8cH+4X9Qn5lO0NmZ+QQL+wKuyxBJr/8poZKr++YDKUrIk4Yoi3crE3ZFxxXIHOZw46CsD3FbvmRAdsXBMPGNpHqzURhg8ZmlJkJ/P1FdnaF+wsWtjObSJJmkxD0sWEfzkC1s1Zi2MubiH+WAd5MYUW1zSjCTaZxJ1mewo5erlDY6fAh2OgXVcAmqj1ggxdZhsva/SQUVVKFD+cntpnYLYKQpHeGEWq1zfIusLmYV6W4kEmKjWXITPAQjRJy41VAxMjmVgJtG1DIzup2ITORaFCBWJhtAqHLikZKi8uI4X3s+Pho9gKv4uvTnW3CQJ1jxaTxpv6hOOxkomCPV2rAURy6ACHsNN7AqQ73kWwzD8XHW8NuH/qIfbC/XxCfnr8BUldcDhXZcMXN6fH9Y3wBlWkqKaWrZNMAAAAASUVORK5CYII=');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/dbcc0acc077a825dcabddd93b1587a02/84f4d/1393.png" title="1393" alt="1393" class="gatsby-resp-image-image" /> </span>

Let's add some style properties to each of the colors. We will set the background to be the name of the colors, like so 👇

    //speech.js

    function displayColors(colors) {
      return colors
        .map((color) =>
          `<span class="color" style="background: ${color};">${color}</span>`
        )
        .join("");
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:38.93333333333334%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+AAFpsgBnsANmsQVosQRqrwVmrwVkrwJbnQBeoABfpgNfnwNdnwNcogFosQBosgBlrwBkrgBlrwBmsAFnsAAKYaQJbrAEc68AZ6wBX7YAcLgAdbUFXpIJYJwLa6IEXqIDXJUCZpAGY6IOZ6gUc7QTdbkPcrQQcLELa68AkGOAnVldVUhfUZQ+KSOQMWuFWKzJrHyo0oGn4Z9gpIxiqI+ufW2PWVg3iXdulry4mouCtLW3yHV0pK24AHxPxrlPkGM7f09idkF1SltpVpZ/npucjrnDfszRpdehmt9YftV/mbWrqqmskVtiRWtqDIWsepKdu3iIzABnkGqcnoaVfL+UZpmcvKu1xr7Gsa/Is4rRiyXYtYzd2Nniva3YrZyCVHt9h7JllbBguExi6JBqvLJZXZ8AYluPkTqHlENwoH1rqNCKid96mcJnwY1/xYpux516xsG6yczQ1b61gElaalaNdcTwTba/UrBaZnh6VleKAI15tM+OrtzJxebW0aSwiUaZeEJ7ZVNoWEqCmEp6mVFycFZwck52g05zi2OKoZXVy+nYq9eycp+rnoGesgAucMA/b8M4Zsc5ZtBJSaFVQI1XPYpYQI02hasqk7AujqcrlqkMqKALqJsMrKEXqaNyrLxyqcJmrbxUo7r4s+8sEd9/4AAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/c08bfa825c60504ff07f193a669a82e0/aa440/1394.png" title="1394" alt="1394" class="gatsby-resp-image-image" /> </span>

We want to know if the color is light or dark so we can change the color of the text accordingly. Wes wrote some CSS ahead of time to handle this.

To do that we can import the `isDark` function from our `colors` module like so:

    // speech.js
    import { handleResult } from "./handlers";
    import { colorsByLength, isDark } from "./colors";

`isDark` will return true or false so we can use that within our back ticks to determine what text color to show.

    // speech.js
    function displayColors(colors) {
      return colors
        .map((color) =>
          `<span class="color ${
            isDark(color) && "dark"
          }" style="background: ${color};">${color}</span>`
        )
        .join("");
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:39.733333333333334%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+AAFpswBosQJmsAVnsgRqrgRmrwZkrgJdoABdnQBepQJfnwNdngRcowFosgBosgBlrwBkrgBlrwBmsAFnsAAKYaYLbKwFcq8Ba6oBXrYAbrcAd7cEYpYLXpoNbaAFYKQEXZcCZpEIY6APZ6gWc7QVdbkRcrURcLAObK8AdWORtmRoaUVoWphCQUCRP2iMXKvCrYCw1oKn6aBltZRks5Guj3+dc2hNmYl8mL+4oZCDt7a3zHt8rLfBAGRgysRbqHhOhV1mkFiNX2F3YZJ8mJaakrPGeMTSpdWooeNkiNiFmbmts66xl2JpSXJvCoOrfJOjxoOS0wBOh3mdoXKagsCdbKCgtKq1y73JsqrQtpbbkC/dsH7e1tTjx7nftZ+GV3mAibNil7NZt1lc6o1uuLJmaKQAU2afpFCXrFuJs4p6rc+IhuF/icdosZJ7vo12w5t8w723xsjMz7m1jVhre2Kaf8r3WLe+X7BWcHqCY1+SAGV3tcSLtMu7xdfK2KeollGLd018dF9oZE6FnFCHqVZ+f1p9fkqHikyHk2OdqobVx+bXqtK5gJmwo4CjswAvdr9EdsU9bsQ+b81MWq5eVp1lXaNjVJ5Chq40lrI3kKw3l64bqKcYpqIZqKYip6hxqb9tp8Jnqr1bpL1g1/YREuX6LAAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/3257ab7e18ade15a5eb0a54860778481/aa440/1395.png" title="1395" alt="1395" class="gatsby-resp-image-image" /> </span>

What should happen is the dark ones have a class of "dark" and the lighter colors should have no class appended.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:53.06666666666666%;position:relative;bottom:0;left:0;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACc0lEQVQoz0XLTUhTcQAA8H9q0SmITtGpQoiuHSLo1iW6VRQpidCammjDSvQSUtGCDJoJYQsRai4N2XJMitSLdpLE8GvO6fb23vbe9r7+7//59ra9LbBDv/sPgM4Y6Jht8sYP90QbuyJH7kcbWz+B6wFwZwK0TDTcDR66NdbQ9gV0z4GOGLgXAZ4o8ESAdxZ4o+BUb+hYf6RxYALcnmvo/AFeLJ32R1v9M1eehU72h4+2jh/3jTV1+U+0j53xTZ5/vnhuaL55aL75yczZgVmw4PX0XGj3jF6+0ea7eOnVzfBU4ONa8c13Pjogh25NDXevvlsdfPDwace1YHA4GPs6/frxUjy+5uvbXf8N9npWwt5gryfk+/yyL/AoPDISex+Jz4+vby6mthdRYAYPhwsLy/s7Kz+XpzuHWgaDV/2/Jt5+W/0wKQBR1RNSLqtAWdE1qOd1PW8Ws6agUE00oaTBVHonlU7mxaws7os7SUUQoK4hRiyoA6ISmFMZoxYqU+o4zIKQQ9PBqIIRd0q2KKsaxAhjyjhh1MJY1bRcXlY1HZgy1DI5ipFu2BByjnRDx4pCDINDSDHBFFlEUbhpYqhXKpV6ve66brVadV0XUA1juVi2KaMOI6UqRwxT02AUlxixOSUEY2Sa0DBKNi85Trlcdl2Xc04pBdsZtJlUEnm4LtINiaZkc0vCfzJ0Q2JbeZpUqQ0tLbEtiZJlIX6gVqu5B4AgwFRCzChmulASVEfWzFTO2kzj3Rzdk0m6CBnCRBSJpkIIa7VavV7/n6FkGoJkFUQpK+/t7uuKZFNumYxh26Y2Z5RhjBQFq6pSKDDG/k3GGCHkLzjn/J5kCnkpAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/5757681bdb365735531b11c7a2b958e6/aa440/1396.png" title="1396" alt="1396" class="gatsby-resp-image-image" /> </span>

However, if you inspect the element in the dev tools, you will see that the classes that are dark have the "dark" class, but the light colors have a "false" class, which is incorrect.

Let's fix that by using at ternary statement instead of the `&&`.

    // speech.js
    function displayColors(colors) {
      return colors
        .map((color) =>
          `<span class="color ${
            isDark(color) ? "dark" : ""
          }" style="background: ${color};">${color}</span>`
        )
        .join("");
    }

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1486px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:32.266666666666666%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABJklEQVQY0y3Oi26CMBQAUP//n3TLlkXnRI1KfCtDEaGlj9vbW9BCF5N9wElOb1Y+v6L75zAbb36/N+nHWn3uzGCl39cmSni0PY8Oqr9Qg4UaLNXwZPtLPUndW5yNEugdlZ/H5Sy6Lc63aH+ZHOU0tbvqEV94fBXTxIyPMDmbaYLz1E7OZnXDnxPbV4+j9L0Qgrwwtr87xT0BYQPadV3bAH+gMtpVDLUkAw6hVoIaIiVE17UhhF4XQpmU+TYHnqPiUhDn9vn0RhQoOWOYZVAUyJjVui4KJHKM86f3LxxCENeq2N1Ji9oCYg1Qe++dkQ61BldVpJQDqI1pDDRETgN0bfePecrLQ4GicCC0dkJQ61srGYEQFeW54cyKiqR0Ujo0KKVs21f7D6GDS1lg3bTvAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/1e2d204d16ee7346aeb3135906a59e63/236d7/1397.png" title="1397" alt="1397" class="gatsby-resp-image-image" /> </span>

As you can see, the light colors only have the "colors" class now.

### <span class="grit"><a href="#combining-speech-and-words" class="hash-anchor before"></a>Combining Speech and Words</span>

Next, go into `handlers.js` and let's start hooking up the speech with actions. Add the following code 👇

    // handlers.js
    function logWords(results) {
      console.log(results[results.length - 1][0].transcript);
    }

    export function handleResult(event) {
      logWords(event.results);
      const words = results[results.length - 1][0].transcript;
      console.log(words);
    }

If you refresh the page and try to say red, you will see an error logged complaining that `results` is not defined.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:38.666666666666664%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB80lEQVQY0wHoARf+AKTC2KrG26fF3KLA2aPC2qPC2qPD26TE3aTD3KPD26PD3KPE3aPC2qPC2aTC2qTC2qTC2qXC2p2+1rvN3QAAZLEAY7ABZLQBaq4AZa4CYa4AWJ4AV5YAWqMAWZ4BWZkBVZsAZLAAZ7UAYq8AYq4AYq4CZLAAXq9JiLYAIG+iEnWqBHebAla1Am64AIe/FG2bJWShKnaaGW2jEWKZDnCRDGCKIGSbL4G2MIK/LYG8MXmvH3GqXJrFAL5ZZWowXl6NOkZLeD1TemSftKqArtyCoe2YZM+ZWcCOmLZ1s3NwUpd6a4+2qZN/Zq+zpMd9gLSgqnOw2ADvhtWxeqyChrF/sJqRppG+p66/sr7OysDf3tfkv7/1l7juvMPl2tne39GMpY55nmSNy5iYwsuWqd6gwNsA3e3k6PLr9PX16unx6urv3+bo3Obm2uPj2+Tm1eHo3Ojn3OHd5ebm7u3u9O7x9/D3+/L39u7t7evl7OnnAOvm6Pn3+Pv6+/z7+/r6+fn6+vr5+f35+vv6+/v6+/r3+Pr5+fv6+v38/Pr7+vv9+/Hz8t3f3+Pk5ff29wD72tn60ND5z8/51tb51dX81dT03Nvq0tLz4OH+7+7/8O//8PD/8O/+7+/+7+//8fD16Ojo3Nzu4eD+7+/1lkzyMEYqPAAAAABJRU5ErkJggg==');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/94dcac31d995903fae7e332d3ed52f0e/aa440/1398.png" title="1398" alt="1398" class="gatsby-resp-image-image" /> </span>

To fix that, let's destructure the results property in the function definitions.

    export function handleResult({ results }) {
      logWords(results);
      const words = results[results.length - 1][0].transcript;
      console.log(words);
    }

When the page refreshes, you will see the speech streaming in.

We need to add a check to see if the word that is streaming is a valid color.

To perform this check, we must first lowercase everything, so we don't have to deal with upper and lowercase versions when comparing. We also want to strip any spaces out because sometimes the SpeechRecognition will return spaces in front of the word.

If it is a valid color, let's show the UI for that. Add the following code 👇

    export function handleResult({ results }) {
      logWords(results);
      const words = results[results.length - 1][0].transcript;
      console.log(words);
      // lowercase everything
      // strip any spaces out
      // check if its a valid colour
      // if it is, then show the UI for that
    }

Let's start with lowercasing.

    // handlers.js
    // lowercase everything
    const color = words.toLowerCase();

Next we will strip any spaces out by replacing whitespace with nothing. Start by modifying the `color` variable to be a `let` instead of a `const`.

When you are replacing characters in JavaScript, if you have only one space to replace you can use the `replace` method like so: `color = color.replace('', '');`.

However if there is more than one space, you have to use a **Regex**. There is a new `replaceAll` method coming, which will do that for you but it is not in the browsers yet.

We will use a Regex that will match all the spaces. The regex to match whitespace is `/\s/` and the if you pass a `/g` flag that means global, so it tells the Regex to find all instances, not just the first.

    // handlers.js
    // strip any spaces out
    color = color.replace(/\s/g, "");

Next we want to check if it is a valid color.

Lets go into our `colors.js` module and add a new function and immediately export it.

    // colors.js
    export function isValidColor(word) {
      return colors[word];
    }

If there is a match, the code above will return the actual hex code. If there is no match, it will return undefined.

In our case, we do not want the hex, we want a boolean.

To achieve that, we can add a double bang (`!!`) to **coerce** it to return true or false like so:

    export function isValidColor(word) {
      return !!colors[word];
    }

That code above works like this:

Calling `colors.red` will return the hex, but calling `!!colors.red` will return `true` and if the property doesn't exist, it will return `false`.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:29.86666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAkElEQVQY043OQQ6EMAhA0d7/gl5g1Iym2GKLxQIzqSaNS9/qJ5CA895P00RE0tUqtWorbf2gjwURcbjvgFhipHEsOWcijvFYFkrpIDrmmQColALQOjcMwDGe5+nCun6GIXhvInox1d56v9C7L6iamcMt+u+aczKz3wt2udsh5i3siMjMffaS20IiYlV5efnpD7/PX7duIs4BAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/c1a57a225e78b45835360eb74a454416/aa440/1399.png" title="1399" alt="1399" class="gatsby-resp-image-image" /> </span>

We could also use the `in` syntax and it would give us the same results.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:644px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:45.599999999999994%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABfUlEQVQoz52Q3W7aQBCF/f4P04u2itSmCmpDL5L+SQ2BAEGBgpcN9vp/vfba+KtsxwipV+msPs2sVnNm9jhS5QiVs/cyhAgQhxTR1ocEV4Tsfc1unyJ8jVCajYw6tocU18+QgWF/hrOVMbOViww0j1fXPLx5x/LjiPnbC9aTOTsZc3fxwGoq+frzjqvxNz5d3/D+8gsfRmOeI4PrZbi+7nCizBLrkiC1eIHG9xPCMCOKNEleEWtLFBfEWUmQmA71kv0w697PcSpryfNWwPB5vOHXb8nl6Imtm9JFw6vCqaqKuq7phI2laCDRFqMNzXCaXvV4PJ4a27qq6q73HMdaSxAENHVNulnj3d6gfnynNpr4T4i6l4RRyGQ6Y7FYMrmfslg+orXuhZt+4IDTNEeKoujHWoMVWypPdlftpeTPade8cwW+Uriiz0PPsP3py+2GZWlQgWa1DpmtIhZPEf8bTllajMlJswJXRMwXB9YbRbt55++LT219ov7Xu8HDv7xUr+egHQSOAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/b3bee031382b027d3976e4483d01fe9b/78274/1400.png" title="1400" alt="1400" class="gatsby-resp-image-image" /> </span>

Next we can import that into our `handlers.js`.

    // handlers.js
    import { isValidColor } from "./colors";

    function logWords(results) {
      // console.log(results[results.length - 1][0].transcript);
    }

    export function handleResult({ results }) {
      logWords(results);
      const words = results[results.length - 1][0].transcript;
      // lowercase everything
      let color = words.toLowerCase();
      // strip any spaces out
      color = color.replace(/\s/g, "");
      // check if it is a valid colour
      if (!isValidColor(color)) return; // thats all folks
      console.log("This is a valid color!");
    }

Now if you try talking and say a valid color, you should see the message "This is a valid color!" pop up.

Let's start working on the UI to display if it is a valid color.

When a color is spoken, we will first cross the word out. To do that, we need to select the span corresponding to the color.

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1498px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:51.46666666666667%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABxUlEQVQoz12S54rbQACE9f6PZHBJcgSMY/tiSy4qq63aLq2s6nXOOhwIHBnm78cHwwTTNJGcopQwBAjMJC3RRd5HP9zKoXG1G7TubNk7N7btXeuuqoaqGppmfH58BNM0FZAzUOgCSZoLVuJY34d773TntLUd541SrTUvTMrW2k6Ixpru4X0w+o88JXlCUQ5AmkKoskha3dwqe6tKY3suWqk6bXpXj1J2UnVCdtoM/XAPdO1PIQr3IDqew+P5fOHhL0ZpTQmnRGSoPsdVDFyGbpC256SKMxdd7CW1QvfBu/Lf9myxIYttvNwny4Oar8V8p9+uzQ7abYzWabU6uh+nenmstnQ4msdB+4Pyv6UPQvtYbtRqo1ZbOl/j75FbHNhsh2c7vNjHq/fL24bNf7LVycx2bEvayD5C7UPtI+P/DpYblpkCUQqI5DeKJYKcEqkY1hRopHGiSttXtvf+z/QlwXOaCDAUWAopzEhR1BgrkHOEZEEwxxmHClyl0q3S3Ti+4Oe/vsw4Myg1JGcwIYw6hAQARQ45xVBQKICCV1lWfVkO/5tfJ0kUvCgCMMlwwWqMdZxQkAvBMIeJgCqNhJSNEM04Pr7Cn8e3Hu/8hYitAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/7604bab660732007212617910122b766/0f586/1401.png" title="1401" alt="1401" class="gatsby-resp-image-image" /> </span>

However, we have run into an issue. We need a way to select a specific span and as you can see above, there is no way to identify the correct span. Let's fix that to add the color's name as a class in addition to the `color` class.

Modify `speech.js` like so:

    // speech.js

    function displayColors(colors) {
      return colors
        .map((color) =>
          `<span class="color ${color} ${
            isDark(color) ? "dark" : ""
          }" style="background: ${color};">${color}</span>`
        )
        .join("");
    }

Back in our `handleResults` function, we can select the color span that was spoken like so 👇

    // if it is, then show the UI for that
    const colorSpan = document.querySelector(`.${color}`);
    console.log(colorSpan);

<span class="gatsby-resp-image-wrapper" style="position:relative;display:block;margin-left:auto;margin-right:auto;max-width:1500px"> <span class="gatsby-resp-image-background-image" style="padding-bottom:11.733333333333333%;position:relative;bottom:0;left:0;background-image:url(https://wesbos.com/javascript/15-final-round-of-exercise/84-web-speech-colours-game/'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAACCAIAAADXZGvcAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAWklEQVQI1zXBSQ6DMBAEQP7/Ty9SIjzjWUB0O86JqiMjv/1jMlRcNN0yfZ5njpGq17QIDYLrBaC1VmsVkSMj3Tzcpvl9P4uLALAAkoskH/xee28ApZTeu6r+AVRtcyT+7FMFAAAAAElFTkSuQmCC');background-size:cover;display:block"></span> <img src="https://wesbos.com/static/1bb0a30a419bec5d32c94cb8080e2698/aa440/1402.png" title="1402" alt="1402" class="gatsby-resp-image-image" /> </span>

If you try speaking the color red when the page refreshes, you should see the red color span logged.

Let's take a look at the CSS. We have a class of `.got` with the following styles set:

    // style.css
    colors span.got {
      text-decoration: line-through;
      animation: jump 0.2s ease-in-out 2 alternate-reverse;
    }

That gives the UI a jump animation which scales the span up and then back down.

Let's add code to also include this class to the span once it has been spoken.

    export function handleResult({ results }) {
      logWords(results);
      const words = results[results.length - 1][0].transcript;
      // lowercase everything
      let color = words.toLowerCase();
      // strip any spaces out
      color = color.replace(/\s/g, "");
      // check if it is a valid colour
      if (!isValidColor(color)) return; // thats all folks
      // if it is, then show the UI for that
      const colorSpan = document.querySelector(`.${color}`);
      colorSpan.classList.add("got");
      console.log(colorSpan);
      console.log("This is a valid color!");
      console.log(color);
    }

That will give the span the class of `got` and animate it once the color is spoken.

We also want to change the background color to the word that was spoke, like so: `document.body.style.backgroundColor = color;`.

Add the following code 👇

    export function handleResult({ results }) {
      logWords(results);
      const words = results[results.length - 1][0].transcript;
      // lowercase everything
      let color = words.toLowerCase();
      // strip any spaces out
      color = color.replace(/\s/g, "");
      // check if it is a valid colour
      if (!isValidColor(color)) return; // thats all folks
      // if it is, then show the UI for that
      const colorSpan = document.querySelector(`.${color}`);
      colorSpan.classList.add("got");
      console.log(colorSpan);
      console.log("This is a valid color!");
      console.log(color);
      // change the background color
      document.body.style.backgroundColor = color;
    }

![](https://wesbos.com/7440387bc1642bf32efebe981920b1e7/red.gif)

As you can see, now the background color is changing when the word is spoken.

That's a wrap for this exercise!

Find an issue with this post? Think you could clarify, update or add something?

All my posts are available to edit on Github. Any fix, little or small, is appreciated!

[Edit on Github](https://github.com/wesbos/wesbos/tree/master/src/javascript/15-final-round-of-exercises/84-web-speech-colours-game/84-web-speech-colours-game.mdx)

[**← Prev**](https://wesbos.com/javascript/14-es-modules-and-structuring-larger-apps/83-security/)

Security

[**Next →**](https://wesbos.com/javascript/15-final-round-of-exercise/85-audio-visualization/)

Audio Visualization

### <span class="highlight">Syntax Podcast</span>

Hold on — I'm grabbin' the last one.
